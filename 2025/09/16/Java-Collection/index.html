<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作 | Arjen</title><meta name="keywords" content="JAVA,Collection"><meta name="author" content="Arjen"><meta name="copyright" content="Arjen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作"><meta name="application-name" content="Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作"><meta property="og:url" content="http://example.com/2025/09/16/Java-Collection/index.html"><meta property="og:site_name" content="Arjen"><meta property="og:description" content="志之难也，不在胜人，在自胜也  集合与数组的区别  相同点： 都是容器,可以存储多个数据 不同点： 数组的长度是不可变的,集合的长度是可变的 数组可以存基本数据类型和引用数据类型 集合只能存引用数据类型,如果要存基本数据类型,需要存对应的包装类 集合体系结构   基本数据结构 栈   特点：先进后出"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png"><meta property="article:author" content="Arjen"><meta property="article:tag" content="blog"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png"><meta name="description" content="志之难也，不在胜人，在自胜也  集合与数组的区别  相同点： 都是容器,可以存储多个数据 不同点： 数组的长度是不可变的,集合的长度是可变的 数组可以存基本数据类型和引用数据类型 集合只能存引用数据类型,如果要存基本数据类型,需要存对应的包装类 集合体系结构   基本数据结构 栈   特点：先进后出"><link rel="shortcut icon" href="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/coke.png"><link rel="canonical" href="http://example.com/2025/09/16/Java-Collection/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"下次见噜!","backTitle":"你回来啦?！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://twikoo.arjen.fun/',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","📸 要成为Nikon佬","⛰️ 自然风光爱好者","🏃 脚踏实地行动派","💔 寡中寡中寡中寡","🎞️ 生活不能没电影","🎶 音乐能治愈一切"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Arjen","link":"链接: ","source":"来源: Arjen","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Arjen',
  title: 'Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作',
  postAI: '',
  pageFillDescription: '志之难也不在胜人在自胜也, 集合与数组的区别, 集合体系结构, 基本数据结构, 栈, 队列, 数组, 链表, 树, 二叉树的遍历方式, 二叉查找树, 平衡二叉树, 平衡二叉树保持平衡机制(旋转), 左旋, 右旋, 需要旋转的情况, 左左——整体右旋, 左右——局部左旋整体右旋, 右右——整体左旋, 右左——局部右旋整体左旋, 红黑树, 红黑规则, 添加节点的规则, 单列集合：一次添加一个数据, 使用场景, Collection集合, 概述, 创建Collection集合的对象, Collection集合常用方法, Collection集合的遍历方式, 迭代器遍历：不依赖索引、创建指针、移动指针获取元素, 增强for遍历, forEach遍历方式, List集合, List集合特有的方法, List集合的遍历方式, ArrayList集合, 底层原理, LinkedList集合, 底层原理, LinkedList第一次添加元素, LinkedList第n次添加元素(n>=2), 迭代器, 泛型深入, 泛型定义的范围, 泛型类, 泛型方法, 泛型接口, 泛型的继承和通配符, Set集合 , , HashSet集合, 哈希表, 哈希值, HashSet JDK8以前的底层原理, HashSet的三个问题, LinkedHashSet集合, 底层原理, TreeSet集合,   TreeSet集合默认的规则, TreeSet比较规则, 双列集合：一次添加一对数据, Map集合, Map常见的API, Map集合获取值的方式, Map集合遍历方式, HashMap集合, HashMap底层源码, LinkedHashMap集合, TreeMap集合, TreeMap底层源码, 可变参数, Collections, 常用API, 不变集合, 创建不可变的集合志之难也不在胜人在自胜也集合与数组的区别相同点都是容器可以存储多个数据不同点数组的长度是不可变的集合的长度是可变的数组可以存基本数据类型和引用数据类型集合只能存引用数据类型如果要存基本数据类型需要存对应的包装类集合体系结构基本数据结构栈特点先进后出后进先出队列特点先进先出后进后出数组特点查询快增删慢链表链表中的结点是独立的对象在内存中是不连续的每个结点包含数据值和下一个结点的地址查询慢增删快树度没一个节点的子节点数量二叉树中任意节点的度树高树的总层数根节点最顶层的节点二叉树的遍历方式前序遍历根左右中序遍历左根右后序遍历左右根层序遍历二叉查找树弊端但数据有序单一会造成树偏移平衡二叉树平衡二叉树保持平衡机制旋转左旋自定义链式左旋左旋后的节点即将作为根节点且不全有左右字数首先找到不平衡的节点也就是要确定支点进行左旋左旋步骤左旋后自定义叉式左旋左旋后即将作为根节点且已经有了两个左右子节点寻找支点进行左旋是支点且左旋的部分涉及到分叉左旋步骤先把即将要变为根节点的多余的节点当做没有按照自定义链式左旋左旋后再将刚才多余的节点链接到旧根节点右旋左旋和右旋的原理一样只是旋转方向不同需要旋转的情况左左整体右旋左右局部左旋整体右旋右右整体左旋右左局部右旋整体左旋红黑树是一种自平衡的二叉查找树是计算机科学中用到的一种数据结构年出现被称为平衡二叉树是一种特殊的二叉查找树红黑树的每一个节点上都有存储位表示节点的颜色每一个节点可以是红或者黑红黑树不是高度平衡的他的平衡是通过红黑规则实现红黑规则每一个节点或是红色的或是黑色的根节点必须是黑色如果一个节点没有子节点或者父节点则该节点相应的指针属性值为这些视为叶节点每个叶节点是黑色的如果某一个节点是红色的那么它的子节点必须是黑色不能出现两个红色相连的情况对每一个节点从该节点到其所有后叶代节点的简单路径上均包含相同数目的黑色节点路径上黑色节点的数量是一样的添加节点的规则单列集合一次添加一个数据系列集合有序存入的顺序和取出来的顺序是一致的可重复集合中的元素可以重复有索引可以按照根据索引取出对应的元素系列集合无序存入的顺序和取出的顺序不一定是一致的不重复集合中的元素是不可以重复无索引不能通过索引获取每一个元素使用场景集合概述是单列集合的祖宗接口它的功能是全部单列集合可以继承使用的是单例集合的顶层接口它表示一组对象这些对象也称为的元素不提供此接口的任何直接实现它提供更具体的子接口如和实现创建集合的对象多态的方式具体的实现类集合常用方法方法名说明添加元素从集合中移除指定的元素根据条件进行移除清空集合中的元素判断集合中是否存在指定的元素判断集合是否为空集合的长度也就是集合中元素的个数添加元素细节往集合中添加元素方法永远返回集合允许元素重复细节往集合中添加元素元素不存在添加成功返回元素存在添加失败返回清空集合中的元素删除传递对象因为集合是集合的接口接口里面定义的是两者共性的方法有索引无索引所以不能通过索引删除元素不存在删除失败判断元素是否包含底层源码这里的方法取决于传入的是什么类型调用的是哪个类型的方法如果存的是自定义对象没有重写方法默认使用的是类中的是方法进行地址值判断原理方法调用了方法利用的返回值大于即可证明元素存在调用了其原理是循环遍历每一个元素找到则返回下标否则返回其中单独进行了传空判断判断集合是否为空获取集合的长度集合的遍历方式集合的遍历方式为通用遍历方式即单列双列集合均可以使用迭代器遍历不依赖索引创建指针移动指针获取元素迭代器中的类是集合的专用遍历方式返回此集合中元素的迭代器通过集合对象的方法得到中的常用方法判断当前位置是否有元素可以被取出获取当前位置的元素将迭代器对象移向下一个索引位置创建集合对象添加元素返回此集合中元素的迭代器通过集合的方法得到迭代器好比一个箭头默认指向索引处初始化迭代器后光标指针初始值为集合调用的方法方法会返回迭代器的对象用循环改进元素的判断和获取判断是否有元素取出获取元素并且移动指针细节点迭代器的细节注意点报错迭代器遍历完毕指针不会复位循环中只能用一次方法迭代器遍历时不能用集合的方法进行增加或者删除会出现并发修改异常的错误如果我实在要删除那么可以用迭代器提供的方法进行删除如果我要添加暂时没有办法只是暂时创建集合并添加元素获取迭代器对象迭代器就好比是一个箭头默认指向集合的索引处利用循环不断的去获取集合中的每一个元素方法的两件事情获取元素并移动指针当上面循环结束之后迭代器的指针已经指向了最后没有元素的位置迭代器遍历完毕指针不会复位如果我们要继续第二次遍历集合只能再次获取一个新的迭代器对象迭代器中的删除方法删除迭代器对象当前指向的元素指向谁那么此时就删除谁增强遍历它是之后出现的其内部原理是一个迭代器实现接口的类才可以使用迭代器和增强简化数组和集合的遍历所有的单列集合才能用增强格式集合数组中元素的数据类型变量名集合数组名已经将当前遍历到的元素封装到变量中了直接使用变量即可快速生成增强代码集合名字回车数据类型一定是集合或者数组中元素的类型仅仅是一个变量名而已在循环的过程中依次表示集合或者数组中的每一个元素就是要遍历的集合或者数组修改增强中的变量不会改变集合中的数据遍历方式开始的表达式提供了一种更简单更直接的遍历集合的方式表达式遍历创建集合并添加元素利用匿名内部类的形式底层原理其实也会自己遍历集合依次得到每一个元素把得到的每一个元素传递给下面的方法依次表示集合中的每一个数据表达式集合的方法都继承了集合因为有索引所以有很多索引操作的方法集合特有的方法方法名描述在此集合中的指定位置插入指定的元素删除指定索引处的元素返回被删除的元素修改指定索引处的元素返回被修改的元素返回指定索引处的元素创建一个集合添加元素返回指定索引处的元素修改指定索引处的元素返回被修改的元素被替换的那个元素在集合中就不存在了删除指定索引处的元素返回被删除的元素在集合中有两个删除的方法第一个删除指定的元素返回值表示当前元素是否删除成功第二个删除指定索引的元素返回值表示实际删除的元素删除这个元素是删除的索引这个元素还是删除的是这个元素索引这个元素因为在调用方法的时候如果出现方法重载的现象优先调用实参和形参类型一致的方法如果想要删除这个元素需要传递一个对象自动装箱即可即可删除元素为这个对象在此集合中的指定位置插入指定的元素原来位置上的元素依次往后挪一个索引集合的遍历方式迭代器列表迭代器增强表达式普通循环创建集合并添加元素迭代器增强下面的变量其实就是一个第三方的变量而已在循环的过程中依次表示集合中的每一个元素表达式方法的底层其实就是一个循环遍历依次得到集合中的每一个元素并把每一个元素传递给下面的方法方法的形参依次表示集合中的每一个元素普通循环方法跟方法还有循环结合的方式利用索引获取到集合中的每一个元素依次表示集合中的每一个索引列表迭代器独有是之前迭代器的子接口获取一个列表迭代器的对象里面的指针默认也是指向索引的额外添加了一个方法在遍历的过程中可以添加元素其中有两个方法和方法相反将指针从后往前移动使用迭代器中的方法去添加其中有两个方法和方法相反集合底层原理空参构造创建对象的时候他在底层先创建了一个默认长度为的数组数组名字定义变量记录数组长度当添加第一个元素的时候底层会创建一个新的长度为的数组这个变量有两层含义元素的个数也就是集合的长度下一个元素的存入位置存满时会创建新的数组长度为原数组的被将原数组的数据拷贝在新数组中如果一次添加多个元素倍还放不下则创建新数组长度以实际为准第一次添加一个元素时当添加元素需要扩容时集合底层原理底层数据结构是双链表查询慢增删快如果操作的是首尾元素速度也是极快的本身多了许多直接操作首尾元素的构造函数第一次添加元素过程创建对象会产生一个堆内存其中的两个结点用于存储目前链表中第一个结点的地址值用于存储目前链表中最后一个结点的地址值调用对象中的方法方法中会调用方法拼接在后面在方法中先用变量来获取目前链表中最后一个结点的地址值因为链表刚创建所以此处为空创建一个新结点按照固定传参将链表最后一个结点的地址值放入新结点的前驱此时头部也为空因为是第一个结点没有前结点将链表最后一个结点的地址值进行更新更新为新结点的地址值判断是否为空也就是判断新节点的前驱是否为空也就是判断该结点是不是链表中的第一个结点此处是将链表中的第一个结点的地址更新为这个新结点的地址值此时第一次创建的新结点既是链表的第一个结点地址值也是链表的最后一个结点地址值完成添加第一个结点第次添加元素过程调用对象中的方法方法中会调用方法拼接在后面在方法中先用变量来获取目前链表中最后一个结点的地址值准备用于插入到新节点的前驱创建一个新结点然后将刚才取出的链表最后一个结点的地址值元素填入新结点中已有新的结点准备链入此时更新链表最后一个结点的地址值为新结点的地址值此时链表中最后一个结点链接新的结点也就是最后一个结点的后继链接新结点的地址值需注意此处为因为已更新为最新结点的地址值而是存放链表最后一个结点的地址值将链表上一个结点的后继更新为新结点的地址值完成链入迭代器底层原理并发修改异常原理泛型深入泛型是中引入的特性可以在编译阶段约束操作的数据类型它提供了编译时类型安全检测机制泛型的格式数据类型泛型只能支持引用数据类型基本数据类型的包装类指定泛型的类型后可以传入该类类型和其子类类型泛型的好处把运行时期的问题提前到了编译期间避免了强制类型转换中的泛型是伪泛型当元素存入集合中底层还是会当做类来处理当获取这些元素的时候集合底层自动进行了强转转为泛型对应的数据类型称为泛型的擦除泛型定义的范围泛型可以定义在类后面方法上面接口后面泛型类使用场景当一个类中某个变量的基本数据类型不确定的时候就可以定义带有泛型的类泛型方法其中为可变参数可以传递任意个参数使用循环遍历参数泛型接口泛型的继承和通配符泛型不具备继承性但数据具备继承性采用通配符就可以限制传递参数集合无序存取顺序不一致不重复可以去重无索引没有带索引的方法不能使用普通循环遍历也不能通过索引来获取元素集合的实现类无序不重复无索引有序不重复无索引可排序不重复无索引接口中的方法基本上与的一致创建集合对象添加元素集合是没有索引的所以不能使用通过索引获取元素的方法遍历集合迭代器遍历增强遍历表达式遍历集合底层数据结构是哈希表存取无序不可以存储重复元素没有索引不能使用普通循环遍历哈希表以前数组链表以后节点个数少于等于个数组链表节点个数多于个数组红黑树哈希值是根据对象的地址或者字符串或者数字算出来的类型的数值该方法定义在类中所有对象都可以调用默认使用地址值计算一般情况下会重写方法利用对象内部的属性值计算哈希值对象的哈希值的特点如果没有重写方法不同对象计算出的哈希值是不同的如果已经重写方法不同的对象只要属性值相同计算出的哈希值就是一样的在小部分情况下不同属性值或者不同的地址值计算出来的哈希值也有可能一样哈希碰撞以前的底层原理创建一个默认长度默认加载因子为的数组数组名根据元素的哈希值跟数组的长度进行计算算出应存入的位置判断当前位置是否为如果是直接存入如果当前计算的位置不是表示有元素则调用方法去比较属性值一样不存不一样存入数组以前新元素存入数组老元素挂在新元素的下面以后新元素直接挂在老元素的下面如果集合中存储的是自定义对象必须重写和方法加载因子是数组扩容时间当数组内元素达到个元素个就会触发扩容机制扩容为原先的倍当数组的长度大于等于且链表挂的元素的长度大于链表会自动转换为红黑树一个元素下面挂多个元素的情况实际上是由于哈希冲突造成的当不同的元素经过哈希计算得到相同的数组索引位置时它们会被存储在同一个位置对应的链表或者红黑树中这种设计可以保证在中快速存储和查找元素同时保证了存储的效率和性能的三个问题为什么存和取的顺序不一样因为元素添加到数组中是从数组的索引开始依次向后遍历全部遍历遇到链表和红黑树会先取链表和红黑树中元素因此顺序会改变为什么没有索引底层涉及数组链表红黑树无法使用索引是利用什么机制保证数据去重的利用方法和方法不同的数据算出的哈希值不同如果遇到哈希冲突再用方法比较数据属性值是否相同相同则剔除集合有序不重复无索引底层原理底层数据结构依旧是哈希表只是每个元素又额外多了一个双链表的机制记录存储的顺序遍历的时候从双向链表的头结点遍历保证了数据的有序集合添加自定义对象时必须指定排序规则不重复无索引可排序默认从小到大集合底层是基于红黑树的数据结构实现排序的增删改查性能都很好创建集合对象添加元素遍历集合增强迭代器表达式集合默认的规则对于数值类型默认按照从小到大的顺序进行排序对于字符字符串类型按照字符在码表中的数字升序进行排序从小到大多个字符的字符串从第一个字母开始依次比较字母的值比较规则这里的需求是指一些特殊的排序如字符长度等第一种默认是数字从小到大字母码从小到大比较器内的写法表示当前要添加的元素表示已经在红黑树存在的元素返回值负数认为要添加的元素是小的在左边正数认为要添加的元素是大的在右边认为添加的元素已经存在方式一默认排序自然排序类实现接口指定比较规则需求按照学生对象的年龄进行排序按照对象的年龄进行排序主要判断条件按照年龄从小到大排序表示当前要添加的元素表示已经在红黑树存在的元素返回值负数认为要添加的元素是小的在左边正数认为要添加的元素是大的在右边认为添加的元素已经存在原理是写了红黑树存数的规则次要判断条件年龄相同时按照姓名的字母顺序排序创建集合对象创建学生对象把学生添加到集合遍历集合方式二创建对象时候传递比较器指定规则有参构造传递接口的实现类重写比较方法表示当前要添加的元素表示已经在红黑树存在的元素返回值规则与之前相同案例需求存储老师对象并遍历创建集合使用带参构造方法要求按照年龄从小到大排序年龄相同时按照姓名的字母顺序排序创建集合对象表示现在要存入的那个元素表示已经存入到集合中的元素主要条件次要条件创建老师对象把老师添加到集合遍历集合双列集合一次添加一对数据双列集合的特点双列集合一次需要存一对数据分别为键和值键不能重复值可以重复键和值是一一对应的每一个键只能找到自己对应的值键值这个整体我们称之为键值对或键值对对象在中叫做对象集合是双列集合的顶层接口它的功能是全部双列集合都可以继承使用的常见的方法名说明添加元素根据键删除键值对元素移除所有的键值对元素判断集合是否包含指定的键判断集合是否包含指定的值判断集合是否为空集合的长度也就是集合中键值对的个数创建集合对象是接口不能创建其对象创建其实现类的对象添加元素方法的细节添加覆盖在添加元素的时候如果键不存在就直接把键值对对象添加到集合中方法返回如果键存在就把原有的键值对对象覆盖把覆盖的值进行返回张无忌赵敏郭靖黄蓉杨过小龙女根据键删除键值对元素删除方法删除键会删除键值对会对值进行返回郭靖郭襄移除所有的键值对元素判断集合是否包含指定的键郭靖郭襄判断集合是否为空集合的长度也就是集合中键值对的个数输出集合对象集合获取值的方式方法名说明根据键获取值获取所有键的集合获取所有值的集合获取所有键值对对象的集合创建集合对象添加元素张无忌赵敏郭靖黄蓉杨过小龙女根据键获取值张无忌张三丰获取所有键的集合获取所有值的集合集合遍历方式键找值遍历思路我们刚才存储的元素都是成对出现的所以我们把看成是一个夫妻对的集合把所有的丈夫给集中起来遍历丈夫的集合获取到每一个丈夫根据丈夫去找对应的妻子步骤分析获取所有键的集合用方法实现遍历键的集合获取到每一个键用增强实现根据键去找值用方法实现创建集合对象添加元素张无忌赵敏郭靖黄蓉杨过小龙女获取所有键的集合用方法实现遍历键的集合获取到每一个键用增强实现根据键去找值用方法实现西游记吴承恩红楼梦曹雪芹水浒传施耐庵三国演义罗贯中将键值对的键使用方法放入集合中遍历集合方式一增强作者方式二迭代器遍历作者方式三表达式遍历的作者键值对遍历思路我们刚才存储的元素都是成对出现的所以我们把看成是一个夫妻对的集合获取所有结婚证的集合遍历结婚证的集合得到每一个结婚证根据结婚证获取丈夫和妻子步骤分析获取所有键值对对象的集合获取所有键值对对象的集合遍历键值对对象的集合得到每一个键值对对象用增强实现得到每一个根据键值对对象获取键和值用得到键用得到值创建集合对象添加元素张无忌赵敏郭靖黄蓉杨过小龙女获取所有键值对对象的集合遍历键值对对象的集合得到每一个键值对对象根据键值对对象获取键和值添加元素富强民主文明和谐放入键值对对象中使用增强遍历使用迭代器遍历表达式遍历表达式遍历底层原理底层实现就是通过调用方法将键值对对象放入集合中然后使用增强遍历使用方法取出键值此处的遍历与之前的遍历方式不同点在于之前的表达式是将键或键值对对象放入单列集合使用表达式遍历实现的是函数式接口此处的表达式是直接遍历集合实现的是函数式接口鱼香肉丝宫爆鸡丁夫妻肺片红烧肉表达式遍历集合无序不重复无索引是里面的一个实现类跟底层原理是一模一样的都是哈希表结构底层原理创建一个数组利用键计算哈希值跟值无关如果索引位置为空则直接存入如果键的位置已存在数据比较属性值属性值是一样的就会覆盖原对象注意如果键存储的是自定义对象需要重写和方法如果值存储自定义对象并不需要重新和方法学生类测试键取值增强遍历对象迭代器遍历表达式直接遍历集合方法设置四个景点产生随机数对象模拟投票四个景点将投好的票放入集合中计数判断当前景点是否存在存在则增加票数通过键获取值取出当前的票数让票数将新票数放入集合中不存在则存入景点的票数是票底层源码键的哈希值键值是链表结构指向下一个元素的地址值红黑树的属性键的哈希值键值父节点的地址值左子节点的地址值右子节点的地址值节点的颜色这个数组就是中存放元素的数组默认数组的长度最大的容量决定了扩容时机空参构造当调用空参构造的时候并未创建数组只是将加载因子设置为默认加载因子添加元素添加元素的时候至少考虑三种情况数组位置为数组位置不为键不重复挂在下面形成链表或者红黑树数组位置不为键重复元素覆盖添加方法当调用添加方法的时候才会创建数组参数键参数值返回值被覆盖元素的值没有覆盖返回第一个字段是将传过去计算键的值第四个参数表示当前的参数是否保留相同值时覆盖数据就是这个参数决定利用键计算出对应的哈希值再把哈希值进行一些额外的处理简单理解返回值就是返回键的哈希值方法调用方法参数键的值参数键参数值参数如果键重复了是否保留旧元素的值保留不覆盖旧元素的值不会保留覆盖定义一个局部变量用来记录哈希表中数组的地址值方法运行在栈中数组存放在堆中需要反复从栈到堆中寻找使用效率不高临时的第三方变量用来记录键值对对象的地址值表示当前数组的长度表示索引把表中数组的地址值赋值给局部变量在底层做的事情如果当前是第一次添加数据底层会创建一个默认长度为加载因子为的数组如果不是第一次添加数据会看数组中的元素是否达到了扩容的条件如果没有达到扩容条件底层不会做任何操作如果达到了扩容条件底层会把数组扩容为原先的两倍并把数据全部转移到新的哈希表中表示把当前数组的长度赋值给拿着数组的长度跟键的哈希值进行与运算计算出当前键值对对象在数组中应该存入的位置获取数组中对应的键值对对象的地址值数组位置的地址值为走中的代码将哈希值键值传递给一个名为的方法方法底层会创建一个键值对对象然后放入数组中不为空走等号左边数组中键值对的值键值对的哈希值是根据键算的等号右边当前要添加键值对的哈希值如果键不一样会返回如果键一样返回如果哈希值不一样键肯定不一样走下边的判断判断是不是树的节点如果从数组中获取出的键值对是树的节点会添加到红黑树中如果不是树节点就当做链表结点添加到链表当中判断条件为获取数组中的结点的下一个结点赋值给判断下一个结点是否为如果为就会创建一个新的结点来挂哈希值相同但是键不同的键值对对象形成一个新的链表判断长度是否超过超过就会调用该方法的底层还会继续判断判断数组的长度是否大于等于如果同时满足这两个条件就会将链表转为红黑树跳出循环若计算出哈希值一样还需要用比较内部的属性值是否相同属性值不同又会返回循环若内部的属性值一样如果为空表示当前不覆盖任何元素不为空表示当前的键是一样的值需要进行覆盖等号的右边当前要添加的值等号的左边被覆盖的值将被覆盖的值记录的就是数组的长度哈希表的扩容时机先再和扩容时机阈值去比较若当前没有覆盖任何元素返回集合由键决定有序不重复无索引底层依旧是哈希表每个键值对又多了一个双链表的机制记录存储的顺序集合添加自定义对象时必须指定排序规则底层是红黑树由键决定特性不重复无索引可排序可排序对键进行排序默认按照从小到大进行排序也可以自己规定键的排序书写两种排序规则实现接口指定比较规则创建集合时传递比较器对象指定比较规则案例需求创建一个集合键是学生对象值是籍贯学生属性姓名和年龄按照年龄进行排序并遍历要求按照学生的年龄进行排序如果年龄相同则按照姓名进行排序按照年龄进行排序次要条件按照姓名排序此处的是包重写的方法按照字母的码顺序从小到大创建集合对象创建学生对象将学生对象添加到集合中江苏北京天津遍历集合打印每个学生的信息判断集合集合中是否有这个字符有的话就计数更新没有就添加进去遍历集合拼接底层源码三个需要知道的成员变量比较规则根节点集合的长度红黑表中节点的个数空参构造默认传值没有比较器对象带参构造传递比较器对象参数一键参数二值参数三当键重复的时候是否需要覆盖值覆盖不覆盖获取根节点的地址值赋值给局部变量判断根节点是否为如果为表示当前是第一次添加会把当前要添加的元素当做根节点如果不为表示当前不是第一次添加跳过这个判断继续执行下面的代码方法的底层会创建一个对象把他当做根节点表示此时没有覆盖任何的元素表示两个元素的键比较之后的结果表示当前要添加节点的父节点表示当前的比较规则如果我们是采取默认的自然排序那么此时记录的是记录的也是如果我们是采取比较去排序方式那么此时记录的是就是比较器表示判断当前是否有比较器对象如果传递了比较器对象就执行里面的代码此时以比较器的规则为准如果没有传递比较器对象就执行里面的代码此时以自然排序的规则为准把键进行强转强转成类型的要求键必须要实现接口如果没有实现这个接口此时在强转的时候就会报错把根节点当做当前节点的父节点调用方法比较根节点和当前要添加节点的大小关系如果比较的结果为负数那么继续到根节点的左边去找如果比较的结果为正数那么继续到根节点的右边去找如果比较的结果为会覆盖判断要添加的根节点是否为空不为空就继续找地方添加为空就找到了地方进行添加节点就会把当前节点按照指定的规则进行添加添加完毕之后需要按照红黑树的规则进行调整因为红黑树的节点默认就是红色的按照红黑规则进行调整获取的父节点获取的爷爷节点获取左子节点判断当前节点的父节点是爷爷节点的左子节点还是右子节点目的为了获取当前节点的叔叔节点表示当前节点的父节点是爷爷节点的左子节点那么下面就可以用获取到当前节点的叔叔节点叔叔节点为红色的处理方案把父节点设置为黑色把叔叔节点设置为黑色把爷爷节点设置为红色把爷爷节点设置为当前节点叔叔节点为黑色的处理方案表示判断当前节点是否为父节点的右子节点表示当前节点是父节点的右子节点左旋表示当前节点的父节点是爷爷节点的右子节点那么下面就可以用获取到当前节点的叔叔节点把根节点设置为黑色课堂思考问题添加元素的时候键是否需要重写和方法此时是不需要重写的是哈希表结构的开始由数组链表红黑树组成的既然有红黑树的键是否需要实现接口或者传递比较器对象呢不需要的因为在的底层默认是利用哈希值的大小关系来创建红黑树的和谁的效率更高如果是最坏情况添加了个元素这个元素形成了链表此时的效率要更高但是这种情况出现的几率非常的少一般而言还是的效率要更高你觉得在集合中会提供一个如果键重复了不会覆盖的方法呢此时本身不重要传递一个思想代码中的逻辑都有两面性如果我们只知道了其中的面而且代码中还发现了有变量可以控制两面性的发生那么该逻辑一定会有面习惯类型的变量控制一般只有两面因为只有两个值类型的变量控制一般至少有三面因为可以取多个值三种双列集合以后如何选择默认效率最高如果要保证存取有序如果要进行排序可变参数方法形参的个数是可以发生变化的格式属性类型名字可变参数的细节是集合工具类作用不是集合而是集合的工具类常用不变集合创建不可变的集合不能修改的集合长度不能修改内容不能修改如果某个数据不能被修改把它防御性拷贝到不可变集合中是很好的实践当集合对象被不可信的库调用时不可变形式是安全的创建不可变的集合张三李四王五赵六一旦创建完毕之后是无法进行修改的在下面的代码中只能进行查询操作张三李四王五赵六李四创建不可变的集合张三李四王五赵六细节当我们要获取一个不可变的集合时里面的参数一定要保证唯一性一旦创建完毕之后是无法进行修改的在下面的代码中只能进行查询操作张三张三李四王五赵六王五键值对数创建的不可变集合细节键是不能重复的细节里面的方法参数是有上限的最多只能传递个参数个键值对细节如果我们要传递多个键值对对象数量大于个在接口中还有一个方法一旦创建完毕之后是无法进行修改的在下面的代码中只能进行查询操作张三南京张三北京王五上海赵六广州孙七深圳周八杭州吴九宁波郑十苏州刘一无锡陈二嘉兴键值对数大于创建的不可变集合键值对的数量超过个创建一个普通的集合张三南京李四北京王五上海赵六北京孙七深圳周八杭州吴九宁波郑十苏州刘一无锡陈二嘉兴利用上面的数据来获取一个不可变的集合获取到所有的键值对对象对象把变成一个数组方法在底层会比较集合的长度跟数组的长度两者的大小如果集合的长度数组的长度数据在数组中放不下此时会根据实际数据的个数重新创建数组如果集合的长度数组的长度数据在数组中放的下此时不会创建新的数组而是直接用不可变的集合',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-10-01 22:49:33',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://earth.nullschool.net/zh-cn" title="earth"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="earth"/><span class="back-menu-item-text">earth</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://bongo.cat/" title="敲鼓喵"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="敲鼓喵"/><span class="back-menu-item-text">敲鼓喵</span></a><a class="back-menu-item" href="/" title="陆续添加中..."><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="陆续添加中..."/><span class="back-menu-item-text">陆续添加中...</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Arjen</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 全部</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=9586170740&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 1.05rem;">API<sup>1</sup></a><a href="/tags/Collection/" style="font-size: 1.05rem;">Collection<sup>1</sup></a><a href="/tags/Exception/" style="font-size: 1.05rem;">Exception<sup>1</sup></a><a href="/tags/File/" style="font-size: 1.05rem;">File<sup>1</sup></a><a href="/tags/IO/" style="font-size: 1.05rem;">IO<sup>1</sup></a><a href="/tags/JAVA/" style="font-size: 1.05rem;">JAVA<sup>13</sup></a><a href="/tags/Lambda/" style="font-size: 1.05rem;">Lambda<sup>1</sup></a><a href="/tags/Stream/" style="font-size: 1.05rem;">Stream<sup>1</sup></a><a href="/tags/Thread/" style="font-size: 1.05rem;">Thread<sup>1</sup></a><a href="/tags/Thread%E6%89%A9%E5%B1%95/" style="font-size: 1.05rem;">Thread扩展<sup>1</sup></a><a href="/tags/%E4%B9%A6%E6%91%98/" style="font-size: 1.05rem;">书摘<sup>1</sup></a><a href="/tags/%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" style="font-size: 1.05rem;">动态代理<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 1.05rem;">反射<sup>1</sup></a><a href="/tags/%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8/" style="font-size: 1.05rem;">方法引用<sup>1</sup></a><a href="/tags/%E7%97%85%E9%9A%99%E7%A2%8E%E7%AC%94/" style="font-size: 1.05rem;">病隙碎笔<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 1.05rem;">网络编程<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java%E8%BF%9B%E9%98%B6/" itemprop="url">Java进阶</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/JAVA/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>JAVA</span></a><a class="article-meta__tags" href="/tags/Collection/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Collection</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-09-16T01:03:52.000Z" title="发表于 2025-09-16 09:03:52">2025-09-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-10-01T14:49:33.825Z" title="更新于 2025-10-01 22:49:33">2025-10-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">15.5k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>61分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为内蒙古"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>内蒙古</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2025/09/16/Java-Collection/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/09/16/Java-Collection/"><header><a class="post-meta-categories" href="/categories/Java%E8%BF%9B%E9%98%B6/" itemprop="url">Java进阶</a><a href="/tags/JAVA/" tabindex="-1" itemprop="url">JAVA</a><a href="/tags/Collection/" tabindex="-1" itemprop="url">Collection</a><h1 id="CrawlerTitle" itemprop="name headline">Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Arjen</span><time itemprop="dateCreated datePublished" datetime="2025-09-16T01:03:52.000Z" title="发表于 2025-09-16 09:03:52">2025-09-16</time><time itemprop="dateCreated datePublished" datetime="2025-10-01T14:49:33.825Z" title="更新于 2025-10-01 22:49:33">2025-10-01</time></header><h1 id="fA7Pj">志之难也，不在胜人，在自胜也</h1>

<h2 id="slUJQ">集合与数组的区别</h2>

<p><strong>相同点：</strong></p>
<p>都是容器,可以存储多个数据</p>
<p><strong>不同点：</strong></p>
<p>数组的长度是不可变的,集合的长度是可变的</p>
<p>数组可以存基本数据类型和引用数据类型</p>
<p>集合只能存引用数据类型,如果要存基本数据类型,需要存对应的包装类</p>
<h2 id="X1ejl">集合体系结构</h2>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1717666385019-08ccbcc1-4acf-44b0-aa93-400f9a003c79.png"></p>
<h2 id="kBYtk">基本数据结构</h2>
<h3 id="mPhmm">栈</h3>

<ul>
<li><p>特点：先进后出，后进先出</p>
<h3 id="HLsrr">队列</h3>
</li>
<li><p>特点：先进先出，后进后出</p>
<h3 id="iWpGr">数组</h3>
</li>
<li><p>特点：查询快，增删慢</p>
<h3 id="XMewd">链表</h3>
</li>
<li><p>链表中的结点是独立的对象，在内存中是不连续的，每个结点包含数据值和下一个结点的地址</p>
</li>
<li><p>查询慢，增删快</p>
<h3 id="TpjxU">树</h3>
</li>
<li><p>度：没一个节点的子节点数量</p>
</li>
<li><p>二叉树中，任意节点的度&lt;&#x3D;2</p>
</li>
<li><p>树高：树的总层数</p>
</li>
<li><p>根节点：最顶层的节点</p>
</li>
</ul>
<h4 id="uGMcn">二叉树的遍历方式</h4>
前序遍历：根左右

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718333843270-48f2c0c6-e094-44e8-875d-b33d1ed0d876.png" alt="前序遍历"><br>中序遍历：左根右</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718334009720-66f22084-1d13-4a6d-865a-0234dbe6bc5b.png" alt="中序遍历"><br>后序遍历：左右根</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718334097388-9c4dc3e9-1723-4940-add2-5d02e16540e0.png" alt="后序遍历"><br>层序遍历：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718334126181-b8087fbd-1f54-4553-a469-37887ff32079.png" alt="层序遍历"></p>
<h4 id="yFhBo">二叉查找树</h4>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718333411424-ca726e2e-a46f-478a-b186-9d7a87cdc1ae.png" alt="二叉查找树"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718333569738-087e3c70-7174-4e08-8c36-f259905f79cc.png" alt="存数规则"></p>
<p><strong>弊端：但数据有序、单一，会造成树偏移</strong></p>
<h4 id="ceW7t">平衡二叉树</h4>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718334741987-aa6ef655-b38e-4f84-bf46-f27f03ebe38d.png" alt="平衡二叉树判断"></p>
<h5 id="rRsPJ">平衡二叉树保持平衡机制(旋转)</h5>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718335208377-c8189797-d254-4c36-b01a-3869e82e04b3.png" alt="保持平衡机制"></p>
<h5 id="UfjPC">左旋</h5><h6 id="nofkY">

<p><strong>自定义链式左旋：左旋后的节点即将作为根节点且不全有左右字数</strong></p>
</h6>
1. 首先找到不平衡的节点，也就是要确定支点

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718335557290-732c0a71-a7fe-41bd-a230-abb19efd965c.png" alt="寻找不平衡的点、支点"><br>2. 进行左旋</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718335615280-0d94b683-a6da-4758-8f07-14b5ead65a83.png" alt="左旋操作"><br>3. 左旋步骤</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718335723944-09b7044e-63b5-42dc-83f4-a1062f822718.png" alt="左旋步骤"><br>4. 左旋后</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718335651665-8454d4e0-bd86-43e9-b276-b49767e36488.png" alt="完成左旋"></p>
<h6 id="txvAK">

<p><strong>自定义叉式左旋：左旋后即将作为根节点且已经有了两个左右子节点</strong></p>
</h6>
1. 寻找支点进行左旋，7是支点，且左旋的部分涉及到分叉

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718336351349-b3d71456-8122-4f70-bdfe-7553fb36e605.png"><br>2. 左旋步骤，先把即将要变为根节点的多余的节点当做没有，按照自定义链式左旋，左旋后，</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718336897163-c337a910-af5a-4585-af55-f8306fb5c9db.png"><br>3. 再将刚才多余的节点，链接到旧根节点</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718336972145-bcef27ca-e048-46eb-a8b9-c9ac8aec36d9.png"></p>
<h5 id="aah7T">右旋</h5>
左旋和右旋的原理一样，只是旋转方向不同

<h5 id="DAbnj">需要旋转的情况</h5>
<h6 id="zhDl4">左左——整体右旋</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349244347-0c213a04-52cb-4b04-9725-81150e1405f2.png"></p>
<h6 id="JffsH">左右——局部左旋整体右旋</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349509704-adb20d2d-0346-492d-879f-e28369534964.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349531297-ab43f5bd-cf20-4d9c-881d-e0c36b2f0aa7.png"></p>
<h6 id="ieusO">右右——整体左旋</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349692890-4d09e260-71b9-4ea6-8cd7-fec772a73705.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349735373-f525db7f-ac9c-4ea7-af7f-ec9dce20191e.png"></p>
<h6 id="t5jtf">右左——局部右旋整体左旋</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349845140-a2bc2efa-a086-4866-b596-e944a8bce445.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718349878556-bfabcc5a-71ca-40c3-b40a-d9cbf8223487.png"></p>
<h4 id="C2hKt">红黑树</h4>

<ul>
<li>是一种自平衡的二叉查找树，是计算机科学中用到的一种数据结构</li>
<li>1972年出现，被称为平衡二叉B树</li>
<li>是一种特殊的二叉查找树，红黑树的每一个节点上都有存储位表示节点的颜色</li>
<li>每一个节点可以是红或者黑，红黑树不是高度平衡的，他的平衡是通过”红黑规则”实现</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718351081455-2888063f-6b2e-427e-9abb-f64643caf498.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718351158988-4c4a5aae-1053-47af-9dcc-10d0fb3e7476.png"></p>
<h5 id="SaAT5">红黑规则</h5>

<ol>
<li>每一个节点或是红色的、或是黑色的</li>
<li>根节点必须是黑色</li>
<li>如果一个节点没有子节点或者父节点，则该节点相应的指针属性值为Nil，这些Nil视为叶节点，每个叶节点Nil是黑色的</li>
<li>如果某一个节点是红色的，那么它的子节点必须是黑色(不能出现两个红色相连的情况)</li>
<li>对每一个节点，从该节点到其所有后叶代节点的简单路径上，均包含相同数目的黑色节点(路径上黑色节点的数量是一样的)</li>
</ol>
<h5 id="xxh4D">添加节点的规则</h5>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718352322100-2131b927-9cdf-4d59-a0e9-2b01daf35814.png"></p>
<h2 id="JWuJS">单列集合：一次添加一个数据</h2>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1717666971124-19181a83-fa23-4d73-978b-978a11496de3.png"><br>List系列集合：</p>
<ul>
<li>有序：存入的顺序和取出来的顺序是一致的。</li>
<li>可重复：集合中的元素可以重复。</li>
<li>有索引：可以按照根据索引取出对应的元素。</li>
</ul>
<p>set系列集合：</p>
<ul>
<li>无序：存入的顺序和取出的顺序不一定是一致的。</li>
<li>不重复：集合中的元素是不可以重复。</li>
<li>无索引：不能通过索引获取每一个元素</li>
</ul>
<h3 id="mliDj">使用场景</h3>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718372158705-b9e755e2-b5ee-4b3d-b3bb-eef5c8c75f6f.png"></p>
<h3 id="Zuk8H">Collection集合</h3>
<h5 id="bDW3E">概述</h5>

<ul>
<li>是单列集合的祖宗接口，它的功能是全部单列集合可以继承使用的</li>
<li>是单例集合的顶层接口,它表示一组对象,这些对象也称为Collection的元素</li>
<li>JDK 不提供此接口的任何直接实现.它提供更具体的子接口(如Set和List)实现</li>
</ul>
<h5 id="LkmdM">创建Collection集合的对象</h5>

<ul>
<li>多态的方式</li>
<li>具体的实现类ArrayList</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br></pre></td></tr></table></figure>

<h5 id="vRTAa">Collection集合常用方法</h5>

<table>
<thead>
<tr>
<th align="left">方法名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">boolean add(E e)</td>
<td align="left">添加元素</td>
</tr>
<tr>
<td align="left">boolean remove(Object o)</td>
<td align="left">从集合中移除指定的元素</td>
</tr>
<tr>
<td align="left">boolean removeIf(Object o)</td>
<td align="left">根据条件进行移除</td>
</tr>
<tr>
<td align="left">void   clear()</td>
<td align="left">清空集合中的元素</td>
</tr>
<tr>
<td align="left">boolean contains(Object o)</td>
<td align="left">判断集合中是否存在指定的元素</td>
</tr>
<tr>
<td align="left">boolean isEmpty()</td>
<td align="left">判断集合是否为空</td>
</tr>
<tr>
<td align="left">int   size()</td>
<td align="left">集合的长度，也就是集合中元素的个数</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.添加元素</span></span><br><span class="line"><span class="comment">// 细节1：往List集合中添加元素，方法永远返回true，List集合允许元素重复</span></span><br><span class="line"><span class="comment">// 细节2：往Set集合中添加元素，元素不存在、添加成功返回true，元素存在，添加失败返回false</span></span><br><span class="line">coll.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.清空集合中的元素</span></span><br><span class="line">coll.clear();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.删除（传递对象）</span></span><br><span class="line"><span class="comment">// 因为Collection集合是List、Set集合的接口，Collection接口里面定义的是两者共性的方法，List</span></span><br><span class="line"><span class="comment">// 有索引、Set无索引，所以不能通过索引删除</span></span><br><span class="line"><span class="comment">// 元素不存在、删除失败</span></span><br><span class="line">coll.remove(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.判断元素是否包含</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> coll.contains(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">System.out.println(result);</span><br><span class="line"><span class="comment">// 底层源码</span></span><br><span class="line"> <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexOf(o) &gt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the index of the first occurrence of the specified element</span></span><br><span class="line"><span class="comment">     * in this list, or -1 if this list does not contain the element.</span></span><br><span class="line"><span class="comment">     * More formally, returns the lowest index &#123;<span class="doctag">@code</span> i&#125; such that</span></span><br><span class="line"><span class="comment">     * &#123;<span class="doctag">@code</span> Objects.equals(o, get(i))&#125;,</span></span><br><span class="line"><span class="comment">     * or -1 if there is no such index.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> indexOfRange(o, <span class="number">0</span>, size);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">indexOfRange</span><span class="params">(Object o, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        Object[] es = elementData;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; end; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (es[i] == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt; end; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (o.equals(es[i])) &#123;  <span class="comment">//这里的equals方法取决于传入的是什么类型，调用的是哪个类型的equals方法</span></span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果存的是自定义对象，没有重写equals方法，默认使用的是Object类中的equals是方法，进行地址值判断</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">原理：contains()方法调用了indexOf()方法，利用indexOf的返回值大于&gt;=0即可证明，元素存在</span></span><br><span class="line"><span class="comment">    indexOf()调用了indexOfRange()，其原理是循环遍历每一个元素，找到则返回下标，否则返回-1，</span></span><br><span class="line"><span class="comment">    其中单独进行了传空判断。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 5.判断集合是否为空</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> coll.isEmpty();</span><br><span class="line">System.out.printlf(result);</span><br><span class="line"></span><br><span class="line"><span class="comment">//6.获取集合的长度</span></span><br><span class="line"><span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> coll.size();</span><br><span class="line">System.out.println(size);</span><br></pre></td></tr></table></figure>


<h5 id="XmYYS">Collection集合的遍历方式</h5>
集合的遍历方式为通用遍历方式，即：单列、双列集合均可以使用

<h6 id="aHe2x">迭代器遍历：不依赖索引、创建指针、移动指针获取元素</h6>
迭代器Java中的类是Iterator,集合的专用遍历方式

<p>Iterator iterator(): 返回此集合中元素的迭代器,通过集合对象的iterator()方法得到</p>
<ul>
<li>Iterator中的常用方法<ul>
<li>boolean hasNext(): 判断当前位置是否有元素可以被取出</li>
<li>E next(): 获取当前位置的元素,将迭代器对象移向下一个索引位置</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IteratorDemo1</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="comment">//创建集合对象</span></span><br><span class="line">         Collection&lt;String&gt; c = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"> </span><br><span class="line">         <span class="comment">//添加元素</span></span><br><span class="line">         c.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">         c.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">         c.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">         c.add(<span class="string">&quot;javaee&quot;</span>);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">//Iterator&lt;E&gt; iterator()：返回此集合中元素的迭代器，通过集合的iterator()方法得到</span></span><br><span class="line">         <span class="comment">// 迭代器好比一个箭头，默认指向0索引处</span></span><br><span class="line">         <span class="comment">// 初始化迭代器后，光标(指针)初始值为-1</span></span><br><span class="line">         Iterator&lt;String&gt; it = c.iterator(); <span class="comment">//集合调用iterator的方法，方法会返回迭代器的对象</span></span><br><span class="line"> </span><br><span class="line">         <span class="comment">//用while循环改进元素的判断和获取</span></span><br><span class="line">         <span class="keyword">while</span> (it.hasNext()) &#123;	<span class="comment">// 判断是否有元素取出</span></span><br><span class="line">             <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next(); <span class="comment">// 获取元素并且移动指针</span></span><br><span class="line">             System.out.println(s);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>细节点：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A04_CollectionDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        迭代器的细节注意点：</span></span><br><span class="line"><span class="comment">            1.报错NoSuchElementException</span></span><br><span class="line"><span class="comment">            2.迭代器遍历完毕，指针不会复位</span></span><br><span class="line"><span class="comment">            3.循环中只能用一次next方法</span></span><br><span class="line"><span class="comment">            4.迭代器遍历时，不能用集合的方法进行增加或者删除</span></span><br><span class="line"><span class="comment">                会出现并发修改异常的错误 </span></span><br><span class="line"><span class="comment">                如果我实在要删除：那么可以用迭代器提供的remove方法进行删除。</span></span><br><span class="line"><span class="comment">                如果我要添加，暂时没有办法。(只是暂时)</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.创建集合并添加元素</span></span><br><span class="line">        Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        coll.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;ddd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.获取迭代器对象</span></span><br><span class="line">        <span class="comment">//迭代器就好比是一个箭头，默认指向集合的0索引处</span></span><br><span class="line">        Iterator&lt;String&gt; it = coll.iterator();</span><br><span class="line">        <span class="comment">//3.利用循环不断的去获取集合中的每一个元素</span></span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="comment">//4.next方法的两件事情：获取元素并移动指针</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//当上面循环结束之后，迭代器的指针已经指向了最后没有元素的位置</span></span><br><span class="line">        <span class="comment">//System.out.println(it.next());//NoSuchElementException</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//迭代器遍历完毕，指针不会复位</span></span><br><span class="line">        System.out.println(it.hasNext());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果我们要继续第二次遍历集合，只能再次获取一个新的迭代器对象</span></span><br><span class="line">        Iterator&lt;String&gt; it2 = coll.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it2.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> it2.next();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>迭代器中的删除方法</p>
<p>void remove(): 删除迭代器对象当前指向的元素</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IteratorDemo2</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">         list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">         list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">         list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">         list.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">         list.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line"> </span><br><span class="line">         Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line">         <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">             <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">             <span class="keyword">if</span>(<span class="string">&quot;b&quot;</span>.equals(s))&#123;</span><br><span class="line">                 <span class="comment">//指向谁,那么此时就删除谁.</span></span><br><span class="line">                 it.remove();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         System.out.println(list);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h6 id="lbsR0">增强for遍历</h6>

<ul>
<li>它是JDK5之后出现的,其内部原理是一个Iterator迭代器</li>
<li>实现Iterable接口的类才可以使用迭代器和增强for</li>
<li>简化数组和Collection集合的遍历(所有的单列集合才能用增强for)</li>
</ul>
<p>格式<br>for(集合&#x2F;数组中元素的数据类型 变量名 : 集合&#x2F;数组名) {<br>&#x2F;&#x2F; 已经将当前遍历到的元素封装到变量中了,直接使用变量即可<br>}</p>
<p>快速生成增强for代码：</p>
<p>集合名字.for 回车</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCollectonDemo1</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          ArrayList&lt;String&gt; list =  <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">          list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;e&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;f&quot;</span>);</span><br><span class="line">  </span><br><span class="line">          <span class="comment">//1,数据类型一定是集合或者数组中元素的类型</span></span><br><span class="line">          <span class="comment">//2,str仅仅是一个变量名而已,在循环的过程中,依次表示集合或者数组中的每一个元素</span></span><br><span class="line">          <span class="comment">//3,list就是要遍历的集合或者数组</span></span><br><span class="line">          <span class="comment">//4.修改增强for中的变量，不会改变集合中的数据</span></span><br><span class="line">          <span class="keyword">for</span>(String str : list)&#123;</span><br><span class="line">              System.out.println(str);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h6 id="GWLPV">forEach遍历方式</h6>
JDK8开始的Lambda表达式，提供了一种更简单、更直接的遍历集合的方式

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A07_CollectionDemo7</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">/* </span></span><br><span class="line"><span class="comment">        lambda表达式遍历：</span></span><br><span class="line"><span class="comment">                default void forEach(Consumer&lt;? super T&gt; action):</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.创建集合并添加元素</span></span><br><span class="line">        Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        coll.add(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line">        coll.add(<span class="string">&quot;wangwu&quot;</span>);</span><br><span class="line">        <span class="comment">//2.利用匿名内部类的形式</span></span><br><span class="line">        <span class="comment">//底层原理：</span></span><br><span class="line">        <span class="comment">//其实也会自己遍历集合，依次得到每一个元素</span></span><br><span class="line">        <span class="comment">//把得到的每一个元素，传递给下面的accept方法</span></span><br><span class="line">        <span class="comment">//s依次表示集合中的每一个数据</span></span><br><span class="line">       <span class="comment">/* coll.forEach(new Consumer&lt;String&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public void accept(String s) &#123;</span></span><br><span class="line"><span class="comment">                System.out.println(s);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//lambda表达式</span></span><br><span class="line">        coll.forEach(s -&gt; System.out.println(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="uGMsT">List集合</h4>

<ul>
<li>Collection的方法List都继承了</li>
<li>List集合因为有索引，所以有很多索引操作的方法</li>
</ul>
<h5 id="FebVA">List集合特有的方法</h5>

<table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>void add(int index,E   element)</td>
<td>在此集合中的指定位置插入指定的元素</td>
</tr>
<tr>
<td>E remove(int   index)</td>
<td>删除指定索引处的元素，返回被删除的元素</td>
</tr>
<tr>
<td>E set(int index,E   element)</td>
<td>修改指定索引处的元素，返回被修改的元素</td>
</tr>
<tr>
<td>E get(int   index)</td>
<td>返回指定索引处的元素</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListDemo</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          <span class="comment">// 1.创建一个集合</span></span><br><span class="line">          List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">          <span class="comment">// 2.添加元素</span></span><br><span class="line">          list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">          list.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">          <span class="comment">//method1(list);</span></span><br><span class="line">          <span class="comment">//method2(list);</span></span><br><span class="line">          <span class="comment">//method3(list);</span></span><br><span class="line">          <span class="comment">//method4(list);</span></span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">          <span class="comment">//        E get(int index)		返回指定索引处的元素</span></span><br><span class="line">          <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> list.get(<span class="number">0</span>);</span><br><span class="line">          System.out.println(s);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">          <span class="comment">//        E set(int index,E element)	修改指定索引处的元素，返回被修改的元素</span></span><br><span class="line">          <span class="comment">//被替换的那个元素,在集合中就不存在了.</span></span><br><span class="line">          <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> list.set(<span class="number">0</span>, <span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">          System.out.println(result);</span><br><span class="line">          System.out.println(list);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">          <span class="comment">//        E remove(int index)		删除指定索引处的元素，返回被删除的元素</span></span><br><span class="line">          <span class="comment">//在List集合中有两个删除的方法</span></span><br><span class="line">          <span class="comment">//第一个 删除指定的元素,返回值表示当前元素是否删除成功</span></span><br><span class="line">          <span class="comment">//第二个 删除指定索引的元素,返回值表示实际删除的元素</span></span><br><span class="line">          <span class="comment">/*</span></span><br><span class="line"><span class="comment">          list.add(1);</span></span><br><span class="line"><span class="comment">          list.add(2);</span></span><br><span class="line"><span class="comment">          list.add(3);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          list.remove(1);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          remove(object o)</span></span><br><span class="line"><span class="comment">          remove(int index)</span></span><br><span class="line"><span class="comment">          </span></span><br><span class="line"><span class="comment">          删除1这个元素 ，是删除的1索引这个元素，还是删除的是1这个元素？</span></span><br><span class="line"><span class="comment">              1索引这个元素</span></span><br><span class="line"><span class="comment">            why？</span></span><br><span class="line"><span class="comment">                因为在调用方法的时候如果出现方法重载的现象</span></span><br><span class="line"><span class="comment">                优先调用，实参和形参类型一致的方法</span></span><br><span class="line"><span class="comment">            如果想要删除1，这个元素，需要传递一个对象，自动装箱即可</span></span><br><span class="line"><span class="comment">                Integer i = Integer.valueOf(1);</span></span><br><span class="line"><span class="comment">                list.remove(i);</span></span><br><span class="line"><span class="comment">            即可删除元素为1这个对象</span></span><br><span class="line"><span class="comment">                  </span></span><br><span class="line"><span class="comment">          */</span></span><br><span class="line">          <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> list.remove(<span class="number">0</span>);</span><br><span class="line">          System.out.println(s);</span><br><span class="line">          System.out.println(list);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">          <span class="comment">//        void add(int index,E element)	在此集合中的指定位置插入指定的元素</span></span><br><span class="line">          <span class="comment">//原来位置上的元素依次往后挪一个索引.</span></span><br><span class="line">          list.add(<span class="number">0</span>,<span class="string">&quot;qqq&quot;</span>);</span><br><span class="line">          System.out.println(list);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h5 id="x3iKS">List集合的遍历方式</h5>

<ol>
<li>迭代器</li>
<li>列表迭代器</li>
<li>增强for</li>
<li>Lambda表达式</li>
<li>普通for循环</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建集合并添加元素</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.迭代器</span></span><br><span class="line"><span class="comment">/*Iterator&lt;String&gt; it = list.iterator();</span></span><br><span class="line"><span class="comment">     while(it.hasNext())&#123;</span></span><br><span class="line"><span class="comment">        String str = it.next();</span></span><br><span class="line"><span class="comment">        System.out.println(str);</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.增强for</span></span><br><span class="line"><span class="comment">//下面的变量s，其实就是一个第三方的变量而已。</span></span><br><span class="line"><span class="comment">//在循环的过程中，依次表示集合中的每一个元素</span></span><br><span class="line"><span class="comment">/* for (String s : list) &#123;</span></span><br><span class="line"><span class="comment">       System.out.println(s);</span></span><br><span class="line"><span class="comment">   &#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.Lambda表达式</span></span><br><span class="line"><span class="comment">//forEach方法的底层其实就是一个循环遍历，依次得到集合中的每一个元素</span></span><br><span class="line"><span class="comment">//并把每一个元素传递给下面的accept方法</span></span><br><span class="line"><span class="comment">//accept方法的形参s，依次表示集合中的每一个元素</span></span><br><span class="line"><span class="comment">//list.forEach(s-&gt;System.out.println(s) );</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.普通for循环</span></span><br><span class="line"><span class="comment">//size方法跟get方法还有循环结合的方式，利用索引获取到集合中的每一个元素</span></span><br><span class="line"><span class="comment">/*for (int i = 0; i &lt; list.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">            //i:依次表示集合中的每一个索引</span></span><br><span class="line"><span class="comment">            String s = list.get(i);</span></span><br><span class="line"><span class="comment">            System.out.println(s);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.列表迭代器(独有)</span></span><br><span class="line"><span class="comment">// 是之前迭代器的子接口</span></span><br><span class="line"><span class="comment">//获取一个列表迭代器的对象，里面的指针默认也是指向0索引的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//额外添加了一个方法：在遍历的过程中，可以添加元素</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">其中有两个方法和hasNext、next方法相反</span></span><br><span class="line"><span class="comment">hasPrevious()</span></span><br><span class="line"><span class="comment">Previous() 将指针从后往前移动</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">ListIterator&lt;String&gt; it = list.listIterator();</span><br><span class="line"><span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> it.next();</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;bbb&quot;</span>.equals(str))&#123;</span><br><span class="line">        <span class="comment">//qqq</span></span><br><span class="line">        it.add(<span class="string">&quot;qqq&quot;</span>); <span class="comment">//使用迭代器中的方法去添加</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">其中有两个方法和hasNext、next方法相反，</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">System.out.println(list);</span><br></pre></td></tr></table></figure>

<h5 id="ZrQgW">ArrayList集合</h5>
<h6 id="tLaAP">底层原理</h6>

<ol>
<li>空参构造创建ArrayList对象的时候，他在底层先创建了一个默认长度为0的数组。<br> 数组名字：elementDate  定义变量size，记录数组长度</li>
<li>当添加第一个元素的时候，底层会创建一个新的长度为10的数组，size++</li>
</ol>
<p>size这个变量有两层含义：</p>
<pre><code>①：元素的个数，也就是集合的长度

②：下一个元素的存入位置
</code></pre>
<ol start="3">
<li>存满时，会创建新的数组，长度为原数组的1.5被，将原数组的数据拷贝在新数组中</li>
<li>如果一次添加多个元素，1.5倍还放不下，则创建新数组，长度以实际为准</li>
</ol>
<p>第一次添加一个元素时：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1717937438017-5cd1bcfb-d284-485c-a1cd-67033ee1ff29.png" alt="空参创建新ArrayList并添加一个元素，第一次添加数据"><br>当添加元素需要扩容时：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1717937974567-649a15b2-50dc-4f2f-996a-183b0ea829d3.png" alt="添加的元素超出了当前数组的上限，第十一次添加数据"></p>
<h5 id="MDXFO">LinkedList集合</h5>
<h6 id="psSGj">底层原理</h6>

<ul>
<li>底层数据结构是双链表、查询慢、增删快</li>
<li>如果操作的是首尾元素，速度也是极快的，LinkedList本身多了许多直接操作首尾元素的API</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E item;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; <span class="comment">// 构造函数</span></span><br><span class="line">            <span class="built_in">this</span>.item = element;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h6 id="rI7Mq">LinkedList第一次添加元素</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718096863852-ddbdb212-a67e-4f7e-acc3-e39f11e3bef4.png" alt="创建LinkedList对象，并添加第一个元素"><br>过程：</p>
<ol>
<li>创建LinkedList对象，会产生一个堆内存，其中的两个结点</li>
</ol>
<p>Node first：用于存储目前链表中，第一个结点的地址值<br>Node last：用于存储目前链表中，最后一个结点的地址值</p>
<ol start="2">
<li>调用LinkedList对象中的add方法，add方法中会调用linkLast方法(拼接在后面)</li>
<li>在linkLast方法中，先用变量l来获取目前链表中最后一个结点的地址值last(因为链表刚创建、所以此处last为空)</li>
<li>创建一个新结点，按照固定传参new<br>Node&lt;&gt;(l,e,null),将链表最后一个结点的地址值l放入新结点的前驱(此时，头部也为空，因为是第一个结点，没有前结点)。</li>
<li>将链表最后一个结点的地址值last进行更新，更新为新结点的地址值</li>
<li>判断l是否为空，也就是判断新节点的前驱是否为空，也就是判断该结点是不是链表中的第一个结点，此处是，将链表中的第一个结点的地址first更新为这个新结点的地址值</li>
<li>此时第一次创建的新结点<br>既是链表的第一个结点(first地址值)，也是链表的最后一个结点(last地址值)</li>
<li>完成添加第一个结点</li>
</ol>
<h6 id="vOKEU">LinkedList第n次添加元素(n>=2)</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718098861662-26fa471c-45e2-4b47-b9c5-c585ea8a1391.png"><br>过程：</p>
<ol>
<li>调用LinkedList对象中的add方法，add方法中会调用linkLast方法(拼接在后面）</li>
<li>在LinkedList方法中，先用变量l来获取目前链表中最后一个结点的地址值last，准备用于插入到新节点的前驱</li>
<li>创建一个新结点 new Node&lt;&gt;(l, e,<br>null)，然后将刚才取出的链表最后一个结点的地址值last、元素e填入新结点中</li>
<li>已有新的结点准备链入，此时更新链表最后一个结点的地址值last为新结点的地址值</li>
<li>此时，链表中最后一个结点l链接新的结点，也就是最后一个结点的后继链接新结点的地址值，需注意：此处为l，因为last已更新为最新结点的地址值，而l是存放链表最后一个结点的地址值，l.next&#x3D;newNode，将链表上一个结点的后继更新为新结点的地址值</li>
<li>完成链入</li>
</ol>
<h4 id="NJtyf">迭代器</h4>

<p>底层原理、并发修改异常原理<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718101598627-e35bf036-1302-44f5-9af1-a982295444cb.png" alt="迭代器底层源码、并发修改异常原理"></p>
<h4 id="jkAVc">泛型深入</h4>

<ul>
<li>泛型是JDK5中引入的特性，可以在编译阶段约束操作的数据类型，它提供了编译时类型安全检测机制</li>
<li>泛型的格式：&lt;数据类型&gt;</li>
<li>泛型只能支持引用数据类型，基本数据类型的包装类，指定泛型的类型后，可以传入该类类型和其子类类型</li>
<li>泛型的好处：1.把运行时期的问题提前到了编译期间  2.避免了强制类型转换</li>
</ul>
<p><strong>Java中的泛型是伪泛型，当元素存入集合中，底层还是会当做Object类来处理，当获取这些元素的时候，集合底层自动进行了强转，转为泛型对应的数据类型。称为泛型的擦除。</strong></p>
<h5 id="bt2Yu">泛型定义的范围</h5>
泛型可以定义在类后面、方法上面、接口后面

<h6 id="Etr2j">泛型类</h6>
使用场景：当一个类中，某个变量的基本数据类型不确定的时候，就可以定义带有泛型的类

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718326148638-5e1d81c1-0812-4c2c-bf31-260c1869186e.png" alt="泛型类格式"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718326564212-c239ee48-2d6c-4c57-8dcf-c53e408ce6af.png" alt="自定义泛型类示例"></p>
<h6 id="wrhOx">泛型方法</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718327141818-331801f7-b00d-4ed2-8ab3-441c3e231400.png" alt="泛型方法使用场景"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718327205443-760b29f2-1bf6-4798-b1fe-f2419c08b15e.png" alt="泛型方法格式"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718327619132-d8d35d2a-8f16-4ce5-8835-d434e176e732.png" alt="泛型方法示例"><br>其中E…e为可变参数，可以传递任意个参数，使用循环遍历参数。</p>
<h6 id="iXbfL">泛型接口</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718328035595-eaaf7839-23d1-44cd-8dd2-47e994dc3690.png" alt="泛型接口的格式、使用场景"></p>
<h5 id="XXvJh">泛型的继承和通配符</h5>
泛型不具备继承性，但数据具备继承性

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718331102357-3668ef0e-de65-47e7-8d83-fbcd99284378.png" alt="创建了Ye、Fu、Zi有继承结构的类，实例化类后，传递实例化类参数到泛型方法中，只有类型相同的才可以传递"><br>采用通配符就可以限制传递参数</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718331596487-f2f83027-8956-4ef3-8811-e007b24d4f5c.png" alt="泛型通配符细节"></p>
<h4 id="Cmshv">Set集合 </h4>

<ul>
<li>无序：存取顺序不一致</li>
<li>不重复：可以去重</li>
<li>无索引：没有带索引的方法，不能使用普通for循环遍历，也不能通过索引来获取元素</li>
</ul>
<p><strong>Set集合的实现类</strong></p>
<ul>
<li>HashSet：无序、不重复、无索引</li>
<li>LinkedHashSet：有序、不重复、无索引</li>
<li>TreeSet：可排序、不重复、无索引</li>
</ul>
<p><strong>Set接口中的方法基本上与Collection的API一致</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySet1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      	<span class="comment">//创建集合对象</span></span><br><span class="line">        Set&lt;String&gt; set = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">      	<span class="comment">//添加元素</span></span><br><span class="line">        set.add(<span class="string">&quot;ccc&quot;</span>); <span class="comment">//true</span></span><br><span class="line">        set.add(<span class="string">&quot;aaa&quot;</span>); <span class="comment">//true</span></span><br><span class="line">        set.add(<span class="string">&quot;aaa&quot;</span>); <span class="comment">//false</span></span><br><span class="line">        set.add(<span class="string">&quot;bbb&quot;</span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        for (int i = 0; i &lt; set.size(); i++) &#123;</span></span><br><span class="line"><span class="comment">//            //Set集合是没有索引的，所以不能使用通过索引获取元素的方法</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">      </span><br><span class="line">      	<span class="comment">//遍历集合</span></span><br><span class="line">        <span class="comment">// 迭代器遍历</span></span><br><span class="line">        Iterator&lt;String&gt; it = set.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">// 增强for遍历</span></span><br><span class="line">        <span class="keyword">for</span> (String s : set) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Lambda表达式遍历</span></span><br><span class="line">        s.forEach(str -&gt; System.out.println(str));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="XxW4t"></h5>
<h5 id="wT1b6">HashSet集合</h5>

<ul>
<li>底层数据结构是哈希表</li>
<li>存取无序</li>
<li>不可以存储重复元素</li>
<li>没有索引,不能使用普通for循环遍历</li>
</ul>
<h6 id="dC8DN">哈希表</h6>

<ul>
<li>JDK1.8以前<br>数组 + 链表</li>
<li>JDK1.8以后<ul>
<li>节点个数少于等于8个<br>数组 + 链表</li>
<li>节点个数多于8个<br>数组 + 红黑树</li>
</ul>
</li>
</ul>
<h6 id="mvin3">哈希值</h6>

<ul>
<li>是JDK根据对象的地址或者字符串或者数字算出来的int类型的数值</li>
<li>该方法定义在Object类中，所有对象都可以调用，默认使用地址值计算</li>
<li>一般情况下，会重写hashCode方法，利用对象内部的属性值计算哈希值</li>
</ul>
<p>对象的哈希值的特点</p>
<ul>
<li>如果没有重写hashCode方法，不同对象计算出的哈希值是不同的</li>
<li>如果已经重写hashCode方法，不同的对象只要属性值相同，计算出的哈希值就是一样的</li>
<li>在小部分情况下，不同属性值或者不同的地址值计算出来的哈希值也有可能一样(哈希碰撞)</li>
</ul>
<h6 id="Wsc9G">HashSet JDK8以前的底层原理</h6>

<ol>
<li>创建一个默认长度16，默认加载因子为0.75的数组，数组名table</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718363339212-ea9ef2c2-9373-49f8-9d79-e17495dee12f.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718363427720-c11a9fc7-6649-4367-a1d7-e178437c826d.png"><br>2. 根据元素的哈希值跟数组的长度进行计算，算出应存入的位置</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718363406756-49901bc0-84f5-4eaf-bfec-f3fb78f2dfeb.png"><br>3. 判断当前位置是否为null，如果是null直接存入<br>4. 如果当前计算的位置不是null，表示有元素，则调用equals方法去比较属性值<br>5. 一样：不存 不一样：存入数组</p>
<p>JDK8以前：新元素存入数组，老元素挂在新元素的下面</p>
<p>JDk8以后：新元素直接挂在老元素的下面</p>
<p><strong>如果集合中存储的是自定义对象，必须重写hashCode和equals方法</strong></p>
<p><strong>加载因子：是数组扩容时间，当数组内元素达到16*0.75个元素<br>12个，就会触发扩容机制，扩容为原先的2倍</strong></p>
<p><strong>当数组的长度大于等于64且链表(挂的元素)的长度大于8，链表会自动转换为红黑树</strong></p>
<p><strong>一个元素下面挂多个元素的情况，实际上是由于哈希冲突造成的。当不同的元素经过哈希计算得到相同的数组索引位置时，它们会被存储在同一个位置对应的链表或者红黑树中。这种设计可以保证在HashSet中快速存储和查找元素，同时保证了存储的效率和性能。</strong></p>
<h6 id="Ok2w8">HashSet的三个问题</h6>

<ol>
<li>为什么存和取的顺序不一样？</li>
</ol>
<p>因为元素添加到数组中，是从数组的0索引开始依次向后遍历，全部遍历，遇到链表和红黑树，会先取链表和红黑树中元素，因此顺序会改变</p>
<ol start="2">
<li>HashSet为什么没有索引？</li>
</ol>
<p>底层涉及数组、链表、红黑树无法使用索引</p>
<ol start="3">
<li>HashSet是利用什么机制保证数据去重的？</li>
</ol>
<p>利用HashCode方法和equals方法，不同的数据算出的哈希值不同，如果遇到哈希冲突，再用equals方法比较数据属性值是否相同，相同则剔除</p>
<h5 id="SC8it">LinkedHashSet集合</h5>

<ul>
<li><strong>有序</strong>、<strong>不重复</strong>、无索引</li>
</ul>
<h6 id="ifflp">底层原理</h6>

<p>底层数据结构依旧是哈希表，只是每个元素又额外多了一个双链表的机制记录存储的顺序</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718367833182-2d88e434-5ba5-4ff6-ba6f-2f2414431bc7.png"><br>遍历的时候从双向链表的头结点遍历，保证了数据的有序</p>
<h5 id="q7EQl">TreeSet集合</h5>

<ul>
<li><strong>添加自定义对象时，必须指定排序规则</strong></li>
<li>不重复、无索引、<strong>可排序（默认从小到大）</strong></li>
<li>TreeSet集合底层是基于红黑树的数据结构实现排序的，增删改查性能都很好</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSetDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建集合对象</span></span><br><span class="line">        TreeSet&lt;Integer&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加元素</span></span><br><span class="line">        ts.add(<span class="number">10</span>);</span><br><span class="line">        ts.add(<span class="number">40</span>);</span><br><span class="line">        ts.add(<span class="number">30</span>);</span><br><span class="line">        ts.add(<span class="number">50</span>);</span><br><span class="line">        ts.add(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">        ts.add(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历集合</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 增强for</span></span><br><span class="line">        <span class="keyword">for</span>(Integer i : ts) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 迭代器</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Lambda表达式</span></span><br><span class="line">        ts.forEach(s-&gt;System.out.print(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="rGWHp">  TreeSet集合默认的规则</h6>

<ul>
<li>对于数值类型，Integer、Double，默认按照从小到大的顺序进行排序</li>
<li>对于字符、字符串类型：按照字符在ASCII码表中的数字升序进行排序(从小到大)，多个字符的字符串，从第一个字母开始依次比较字母的ASCII值</li>
</ul>
<h6 id="TgdIy">TreeSet比较规则</h6>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718370710067-cd781ab9-2786-4cf4-9a8f-ea8f0a2fc230.png"><br><strong>这里的需求是指一些特殊的排序，如字符长度等，第一种默认是数字从小到大，字母ASCII码从小到大</strong></p>
<p>比较器内的写法</p>
<p><strong>this：表示当前要添加的元素</strong></p>
<p><strong>o：表示已经在红黑树存在的元素</strong></p>
<p><strong>返回值：</strong></p>
<p><strong>负数：认为要添加的元素是小的，在左边</strong></p>
<p><strong>正数：认为要添加的元素是大的，在右边</strong></p>
<p><strong>0：认为添加的元素已经存在</strong></p>
<p>方式一：</p>
<p>默认排序&#x2F;自然排序：javabean类实现Comparable接口指定比较规则</p>
<p>需求：按照学生对象的年龄进行排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;</span><br><span class="line">     <span class="keyword">private</span> String name;</span><br><span class="line">     <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">         <span class="built_in">this</span>.age = age;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> name;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.name = name;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> age;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">         <span class="built_in">this</span>.age = age;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                 <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                 <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                 <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span> &#123;</span><br><span class="line">         <span class="comment">//按照对象的年龄进行排序</span></span><br><span class="line">         <span class="comment">//主要判断条件: 按照年龄从小到大排序</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">         this：表示当前要添加的元素</span></span><br><span class="line"><span class="comment">         o：表示已经在红黑树存在的元素</span></span><br><span class="line"><span class="comment">         返回值：</span></span><br><span class="line"><span class="comment">             负数：认为要添加的元素是小的，在左边</span></span><br><span class="line"><span class="comment">             正数：认为要添加的元素是大的，在右边</span></span><br><span class="line"><span class="comment">             0：认为添加的元素已经存在</span></span><br><span class="line"><span class="comment">         原理是写了红黑树存数的规则</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="built_in">this</span>.age - o.age;</span><br><span class="line">         <span class="comment">//次要判断条件: 年龄相同时，按照姓名的字母顺序排序</span></span><br><span class="line">         result = result == <span class="number">0</span> ? <span class="built_in">this</span>.name.compareTo(o.getName()) : result;</span><br><span class="line">         <span class="keyword">return</span> result;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTreeSet2</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          <span class="comment">//创建集合对象</span></span><br><span class="line">          TreeSet&lt;Student&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">  	    <span class="comment">//创建学生对象</span></span><br><span class="line">          <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhangsan&quot;</span>,<span class="number">23</span>);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;lisi&quot;</span>,<span class="number">24</span>);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;wangwu&quot;</span>,<span class="number">25</span>);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhaoliu&quot;</span>,<span class="number">26</span>);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;qianqi&quot;</span>,<span class="number">27</span>);</span><br><span class="line">  		<span class="comment">//把学生添加到集合</span></span><br><span class="line">          ts.add(s1);</span><br><span class="line">          ts.add(s2);</span><br><span class="line">          ts.add(s3);</span><br><span class="line">          ts.add(s4);</span><br><span class="line">          ts.add(s5);</span><br><span class="line">  		<span class="comment">//遍历集合</span></span><br><span class="line">          <span class="keyword">for</span> (Student student : ts) &#123;</span><br><span class="line">              System.out.println(student);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>方式二：创建TreeSet对象时候，传递比较器Comparator指定规则<br>有参构造，传递接口的实现类，重写比较方法<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718370861820-a0b2d6e6-f257-45ea-84f1-89adc3fed2e1.png"><br>o1：表示当前要添加的元素</p>
<p>o2：表示已经在红黑树存在的元素</p>
<p>返回值规则与之前相同</p>
<ul>
<li>案例需求<ul>
<li>存储老师对象并遍历，创建TreeSet集合使用带参构造方法</li>
<li>要求：按照年龄从小到大排序，年龄相同时，按照姓名的字母顺序排序</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> name;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> age;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;Teacher&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTreeSet4</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        	<span class="comment">//创建集合对象</span></span><br><span class="line">          TreeSet&lt;Teacher&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Teacher&gt;() &#123;</span><br><span class="line">              <span class="meta">@Override</span></span><br><span class="line">              <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Teacher o1, Teacher o2)</span> &#123;</span><br><span class="line">                  <span class="comment">//o1表示现在要存入的那个元素</span></span><br><span class="line">                  <span class="comment">//o2表示已经存入到集合中的元素</span></span><br><span class="line">                </span><br><span class="line">                  <span class="comment">//主要条件</span></span><br><span class="line">                  <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> o1.getAge() - o2.getAge();</span><br><span class="line">                  <span class="comment">//次要条件</span></span><br><span class="line">                  result = result == <span class="number">0</span> ? o1.getName().compareTo(o2.getName()) : result;</span><br><span class="line">                  <span class="keyword">return</span> result;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">  		<span class="comment">//创建老师对象</span></span><br><span class="line">          <span class="type">Teacher</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;zhangsan&quot;</span>,<span class="number">23</span>);</span><br><span class="line">          <span class="type">Teacher</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;lisi&quot;</span>,<span class="number">22</span>);</span><br><span class="line">          <span class="type">Teacher</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;wangwu&quot;</span>,<span class="number">24</span>);</span><br><span class="line">          <span class="type">Teacher</span> <span class="variable">t4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;zhaoliu&quot;</span>,<span class="number">24</span>);</span><br><span class="line">  		<span class="comment">//把老师添加到集合</span></span><br><span class="line">          ts.add(t1);</span><br><span class="line">          ts.add(t2);</span><br><span class="line">          ts.add(t3);</span><br><span class="line">          ts.add(t4);</span><br><span class="line">  		<span class="comment">//遍历集合</span></span><br><span class="line">          <span class="keyword">for</span> (Teacher teacher : ts) &#123;</span><br><span class="line">              System.out.println(teacher);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h2 id="NcOBo">双列集合：一次添加一对数据</h2>
双列集合的特点：

<ul>
<li>双列集合一次需要存一对数据，分别为键和值</li>
<li>键不能重复，值可以重复</li>
<li>键和值是一一对应的，每一个键只能找到自己对应的值</li>
<li>键+值这个整体我们称之为“键值对”或“键值对对象”，在Java中叫做Entry对象</li>
</ul>
<h3 id="F64CQ">Map集合</h3>
Map是双列集合的顶层接口，它的功能是全部双列集合都可以继承使用的

<h4 id="bgENB">Map常见的API</h4>

<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>V   put(K key,V   value)</td>
<td>添加元素</td>
</tr>
<tr>
<td>V   remove(Object key)</td>
<td>根据键删除键值对元素</td>
</tr>
<tr>
<td>void   clear()</td>
<td>移除所有的键值对元素</td>
</tr>
<tr>
<td>boolean containsKey(Object key)</td>
<td>判断集合是否包含指定的键</td>
</tr>
<tr>
<td>boolean containsValue(Object value)</td>
<td>判断集合是否包含指定的值</td>
</tr>
<tr>
<td>boolean isEmpty()</td>
<td>判断集合是否为空</td>
</tr>
<tr>
<td>int size()</td>
<td>集合的长度，也就是集合中键值对的个数</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo02</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="comment">//创建集合对象</span></span><br><span class="line">         <span class="comment">// Map是接口，不能创建其对象，创建其实现类的对象</span></span><br><span class="line">         Map&lt;String,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,String&gt;();</span><br><span class="line"></span><br><span class="line">         <span class="comment">//V put(K key,V value)：添加元素</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">         put方法的细节：</span></span><br><span class="line"><span class="comment">         添加/覆盖</span></span><br><span class="line"><span class="comment">         在添加元素的时候，</span></span><br><span class="line"><span class="comment">         如果键不存在，就直接把键值对对象添加到Map集合中，方法返回null</span></span><br><span class="line"><span class="comment">         如果键存在，就把原有的键值对对象覆盖，把覆盖的值进行返回</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         map.put(<span class="string">&quot;张无忌&quot;</span>,<span class="string">&quot;赵敏&quot;</span>);</span><br><span class="line">         map.put(<span class="string">&quot;郭靖&quot;</span>,<span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line">         map.put(<span class="string">&quot;杨过&quot;</span>,<span class="string">&quot;小龙女&quot;</span>);</span><br><span class="line"></span><br><span class="line">         <span class="comment">//V remove(Object key)：根据键删除键值对元素</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">         删除方法，删除键，会删除键值对，会对值进行返回</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(map.remove(<span class="string">&quot;郭靖&quot;</span>));</span><br><span class="line">        System.out.println(map.remove(<span class="string">&quot;郭襄&quot;</span>));</span><br><span class="line"></span><br><span class="line">         <span class="comment">//void clear()：移除所有的键值对元素</span></span><br><span class="line">        map.clear();</span><br><span class="line"></span><br><span class="line">         <span class="comment">//boolean containsKey(Object key)：判断集合是否包含指定的键</span></span><br><span class="line">        System.out.println(map.containsKey(<span class="string">&quot;郭靖&quot;</span>));</span><br><span class="line">        System.out.println(map.containsKey(<span class="string">&quot;郭襄&quot;</span>));</span><br><span class="line"></span><br><span class="line">         <span class="comment">//boolean isEmpty()：判断集合是否为空</span></span><br><span class="line">        System.out.println(map.isEmpty());</span><br><span class="line"></span><br><span class="line">         <span class="comment">//int size()：集合的长度，也就是集合中键值对的个数</span></span><br><span class="line">         System.out.println(map.size());</span><br><span class="line"></span><br><span class="line">         <span class="comment">//输出集合对象</span></span><br><span class="line">         System.out.println(map);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<h4 id="SOWNP">Map集合获取值的方式</h4>

<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>V   get(Object key)</td>
<td>根据键获取值</td>
</tr>
<tr>
<td>Set   keySet()</td>
<td>获取所有键的集合</td>
</tr>
<tr>
<td>Collection   values()</td>
<td>获取所有值的集合</td>
</tr>
<tr>
<td>Set&lt;Map.Entry&lt;K,V&gt;&gt;   entrySet()</td>
<td>获取所有键值对对象的集合</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo03</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          <span class="comment">//创建集合对象</span></span><br><span class="line">          Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">          <span class="comment">//添加元素</span></span><br><span class="line">          map.put(<span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;赵敏&quot;</span>);</span><br><span class="line">          map.put(<span class="string">&quot;郭靖&quot;</span>, <span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line">          map.put(<span class="string">&quot;杨过&quot;</span>, <span class="string">&quot;小龙女&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//V get(Object key):根据键获取值</span></span><br><span class="line">  <span class="comment">//        System.out.println(map.get(&quot;张无忌&quot;));</span></span><br><span class="line">  <span class="comment">//        System.out.println(map.get(&quot;张三丰&quot;));</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">//Set&lt;K&gt; keySet():获取所有键的集合</span></span><br><span class="line">  <span class="comment">//        Set&lt;String&gt; keySet = map.keySet();</span></span><br><span class="line">  <span class="comment">//        for(String key : keySet) &#123;</span></span><br><span class="line">  <span class="comment">//            System.out.println(key);</span></span><br><span class="line">  <span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">//Collection&lt;V&gt; values():获取所有值的集合</span></span><br><span class="line">          Collection&lt;String&gt; values = map.values();</span><br><span class="line">          <span class="keyword">for</span>(String value : values) &#123;</span><br><span class="line">              System.out.println(value);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="pTq38">Map集合遍历方式</h4>

<ol>
<li><strong>键找值</strong></li>
</ol>
<ul>
<li>遍历思路<ul>
<li>我们刚才存储的元素都是成对出现的，所以我们把Map看成是一个夫妻对的集合</li>
<li>把所有的丈夫给集中起来</li>
<li>遍历丈夫的集合，获取到每一个丈夫</li>
<li>根据丈夫去找对应的妻子</li>
</ul>
</li>
<li>步骤分析<ul>
<li>获取所有键的集合。用keySet()方法实现</li>
<li>遍历键的集合，获取到每一个键。用增强for实现</li>
<li>根据键去找值。用get(Object key)方法实现</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo01</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">         <span class="comment">//创建集合对象</span></span><br><span class="line">         Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">         <span class="comment">//添加元素</span></span><br><span class="line">         map.put(<span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;赵敏&quot;</span>);</span><br><span class="line">         map.put(<span class="string">&quot;郭靖&quot;</span>, <span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line">         map.put(<span class="string">&quot;杨过&quot;</span>, <span class="string">&quot;小龙女&quot;</span>);</span><br><span class="line"></span><br><span class="line">         <span class="comment">//获取所有键的集合。用keySet()方法实现</span></span><br><span class="line">         Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">         <span class="comment">//遍历键的集合，获取到每一个键。用增强for实现</span></span><br><span class="line">         <span class="keyword">for</span> (String key : keySet) &#123;</span><br><span class="line">             <span class="comment">//根据键去找值。用get(Object key)方法实现</span></span><br><span class="line">             <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">             System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        HashMap&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        hm.put(<span class="string">&quot;西游记&quot;</span>,<span class="string">&quot;吴承恩&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;红楼梦&quot;</span>,<span class="string">&quot;曹雪芹&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;水浒传&quot;</span>,<span class="string">&quot;施耐庵&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;三国演义&quot;</span>,<span class="string">&quot;罗贯中&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        将键值对的键，使用keySet方法放入集合中</span></span><br><span class="line">        Set&lt;String&gt; keySet = hm.keySet();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        遍历集合</span></span><br><span class="line"><span class="comment">//        方式一：增强for</span></span><br><span class="line">        <span class="keyword">for</span> (String key : keySet) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> hm.get(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;作者:&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========================================&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        方式二：迭代器遍历</span></span><br><span class="line">        Iterator&lt;String&gt; it = keySet.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">value2</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(value2+<span class="string">&quot;作者：&quot;</span>+ hm.get(value2));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========================================&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        方式三：lambda表达式遍历</span></span><br><span class="line">        keySet.forEach(s -&gt; System.out.println(s+<span class="string">&quot;的作者:&quot;</span>+hm.get(s)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<ol start="2">
<li><strong>键值对</strong></li>
</ol>
<ul>
<li>遍历思路<ul>
<li>我们刚才存储的元素都是成对出现的，所以我们把Map看成是一个夫妻对的集合</li>
<li>获取所有结婚证的集合</li>
<li>遍历结婚证的集合，得到每一个结婚证</li>
<li>根据结婚证获取丈夫和妻子</li>
</ul>
</li>
<li>步骤分析<ul>
<li>获取所有键值对对象的集合<ul>
<li>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()：获取所有键值对对象的集合</li>
</ul>
</li>
<li>遍历键值对对象的集合，得到每一个键值对对象<ul>
<li>用增强for实现，得到每一个Map.Entry</li>
</ul>
</li>
<li>根据键值对对象获取键和值<ul>
<li>用getKey()得到键</li>
<li>用getValue()得到值</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapDemo02</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          <span class="comment">//创建集合对象</span></span><br><span class="line">          Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">          <span class="comment">//添加元素</span></span><br><span class="line">          map.put(<span class="string">&quot;张无忌&quot;</span>, <span class="string">&quot;赵敏&quot;</span>);</span><br><span class="line">          map.put(<span class="string">&quot;郭靖&quot;</span>, <span class="string">&quot;黄蓉&quot;</span>);</span><br><span class="line">          map.put(<span class="string">&quot;杨过&quot;</span>, <span class="string">&quot;小龙女&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">//获取所有键值对对象的集合</span></span><br><span class="line">          Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = map.entrySet();</span><br><span class="line">          <span class="comment">//遍历键值对对象的集合，得到每一个键值对对象</span></span><br><span class="line">          <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; me : entrySet) &#123;</span><br><span class="line">              <span class="comment">//根据键值对对象获取键和值</span></span><br><span class="line">              <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> me.getKey();</span><br><span class="line">              <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> me.getValue();</span><br><span class="line">              System.out.println(key + <span class="string">&quot;,&quot;</span> + value);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> JiHe.map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//        添加元素</span></span><br><span class="line">        map.put(<span class="string">&quot;富&quot;</span>,<span class="string">&quot;强&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;民&quot;</span>,<span class="string">&quot;主&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;文&quot;</span>,<span class="string">&quot;明&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;和&quot;</span>,<span class="string">&quot;谐&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        放入键值对对象中</span></span><br><span class="line">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = map.entrySet();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        使用增强for遍历</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(key + value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===========================&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        使用iterator迭代器遍历</span></span><br><span class="line">        Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it  = entries.iterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;String, String&gt; next = it.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value1</span> <span class="operator">=</span> next.getValue();</span><br><span class="line">            <span class="type">String</span> <span class="variable">key1</span> <span class="operator">=</span> next.getKey();</span><br><span class="line">            System.out.println(key1 + value1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;===========================&quot;</span>);</span><br><span class="line"><span class="comment">//        lambda表达式遍历</span></span><br><span class="line">        entries.forEach(entry -&gt;&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key2</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value2</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(key2+value2);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<ol start="3">
<li><strong>Lambda表达式遍历</strong></li>
</ol>
<p><strong>底层原理;</strong></p>
<p><strong>底层实现就是通过调用entrySet方法将键值对对象放入Set集合中，然后使用增强for遍历，使用getKey、getValue方法取出键、值</strong></p>
<hr>
<p><strong>此处的Lambda遍历与之前的Lambda遍历方式不同点在于：</strong></p>
<p><strong>之前的Lambda表达式是将键或键值对对象放入单列集合使用Lambda表达式遍历，实现的是Consumer函数式接口</strong></p>
<p><strong>此处的Lambda表达式是直接遍历Map集合，实现的是BiConsumer函数式接口</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718421091780-66c7005c-c513-461e-ae0f-397b05812dcc.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;鱼香&quot;</span>,<span class="string">&quot;肉丝&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;宫爆&quot;</span>,<span class="string">&quot;鸡丁&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;夫妻&quot;</span>,<span class="string">&quot;肺片&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;红烧&quot;</span>,<span class="string">&quot;肉&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        Lambda表达式遍历</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">//        map.forEach(new BiConsumer&lt;String, String&gt;() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void accept(String key, String value) &#123;</span></span><br><span class="line"><span class="comment">//                System.out.println(key + value);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        map.forEach((key,value)-&gt;&#123;</span><br><span class="line">            System.out.println(key + value);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="r1ypu">HashMap集合</h4>

<ul>
<li>无序、不重复、无索引</li>
<li>HashMap是Map里面的一个实现类</li>
<li>HashMap跟HashSet底层原理是一模一样的，都是哈希表结构</li>
</ul>
<p><strong>底层原理：</strong></p>
<ol>
<li><strong>创建一个数组</strong></li>
<li><strong>利用键计算哈希值，跟值无关</strong></li>
<li><strong>如果索引位置为空，则直接存入，如果键的位置已存在数据，比较属性值，属性值是一样的，就会覆盖原entry对象</strong></li>
</ol>
<p>注意：</p>
<ol>
<li>如果键存储的是自定义对象，需要重写HashCode和equals方法</li>
<li>如果值存储自定义对象，并不需要重新HashCode和equals方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 学生类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(name, student.name) &amp;&amp; Objects.equals(age, student.age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name, age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        HashMap&lt;Student, String&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        hm.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">23</span>), <span class="string">&quot;sichuan&quot;</span>);</span><br><span class="line">        hm.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;lisi&quot;</span>, <span class="number">24</span>), <span class="string">&quot;fujian&quot;</span>);</span><br><span class="line">        hm.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;wangwu&quot;</span>, <span class="number">25</span>), <span class="string">&quot;beijing&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;Student&gt; keySets = hm.keySet();</span><br><span class="line"></span><br><span class="line">        Set&lt;Map.Entry&lt;Student, String&gt;&gt; entries = hm.entrySet();</span><br><span class="line"></span><br><span class="line"><span class="comment">//      键取值  增强for遍历</span></span><br><span class="line">        <span class="keyword">for</span> (Student key : keySets) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">value1</span> <span class="operator">=</span> hm.get(key);</span><br><span class="line">            System.out.println(key + value1);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;============================&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        entry对象 iterator迭代器遍历</span></span><br><span class="line">        Iterator&lt;Map.Entry&lt;Student, String&gt;&gt; it = entries.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            Map.Entry&lt;Student, String&gt; next = it.next();</span><br><span class="line">            <span class="type">Student</span> <span class="variable">key2</span> <span class="operator">=</span> next.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value2</span> <span class="operator">=</span> next.getValue();</span><br><span class="line">            System.out.println(key2 + value2);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;==============================&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        lambda表达式直接遍历map集合</span></span><br><span class="line">        hm.forEach((key3,value3)-&gt;&#123;</span><br><span class="line">            System.out.println(key3+ value3);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HashMap方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapDemo5</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        设置四个景点</span></span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;D&quot;</span>&#125;;</span><br><span class="line"><span class="comment">//        产生随机数对象，模拟投票四个景点</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">80</span>; i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">ticket</span> <span class="operator">=</span> arr[r.nextInt(arr.length)];</span><br><span class="line">            list.add(ticket);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//      将投好的票，放入Map集合中计数</span></span><br><span class="line">        HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String name : list) &#123;</span><br><span class="line"><span class="comment">//            判断当前景点是否存在</span></span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(name))&#123;</span><br><span class="line"><span class="comment">//                存在则增加票数</span></span><br><span class="line"><span class="comment">//                通过键获取值，取出当前的票数</span></span><br><span class="line">                <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> map.get(name);</span><br><span class="line"><span class="comment">//                让票数+1</span></span><br><span class="line">                count++;</span><br><span class="line"><span class="comment">//                将新票数放入集合中</span></span><br><span class="line">                map.put(name,count);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//                不存在则存入景点</span></span><br><span class="line">                map.put(name,<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        map.forEach((key,value)-&gt; System.out.println(key+<span class="string">&quot;的票数是&quot;</span>+value+<span class="string">&quot;票&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="BWVtX">HashMap底层源码</h5>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K, V&gt; &#123; <span class="keyword">final</span> <span class="type">int</span> hash;</span><br><span class="line"><span class="comment">//键的哈希值 final K key; // 键 V value; //值 Node&lt;K, V&gt; next;</span></span><br><span class="line"><span class="comment">//是链表结构，指向下一个元素的地址值 &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 红黑树的属性 static final class TreeNode&lt;K, V&gt; extends</span></span><br><span class="line">LinkedHashMap.Entry&lt;K, V&gt; &#123; <span class="type">int</span> hash; <span class="comment">//键的哈希值 final K key; //键 V</span></span><br><span class="line">value; <span class="comment">//值 TreeNode&lt;K, V&gt; parent; // 父节点的地址值 red-black tree links</span></span><br><span class="line">TreeNode&lt;K, V&gt; left; <span class="comment">//左子节点的地址值 TreeNode&lt;K, V&gt; right;</span></span><br><span class="line"><span class="comment">//右子节点的地址值 TreeNode&lt;K, V&gt; prev; // needed to unlink next upon</span></span><br><span class="line">deletion <span class="type">boolean</span> red; <span class="comment">// 节点的颜色 &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//这个数组就是HashMap中存放元素的数组</span></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;K, V&gt;[] table;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The default initial capacity - MUST be a power of two.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认数组的长度1*2^4 static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4;</span></span><br><span class="line"><span class="comment">// aka 16</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The maximum capacity, used if a higher value is implicitly specified</span></span><br><span class="line"><span class="comment">     * by either of the constructors with arguments.</span></span><br><span class="line"><span class="comment">     * MUST be a power of two &lt;= 1&lt;&lt;30.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 最大的容量1*2^30 static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The load factor used when none specified in constructor.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 决定了扩容时机</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 空参构造</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当调用空参构造的时候，并未创建数组，只是将加载因子设置为默认加载因子 public</span></span><br><span class="line">HashMap() &#123; <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields</span></span><br><span class="line">defaulted &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.添加元素</span></span><br><span class="line">    HashMap&lt;String, Integer&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">hm.put(<span class="string">&quot;aaa&quot;</span>,<span class="number">111</span>); hm.put(<span class="string">&quot;bbb&quot;</span>,<span class="number">222</span>); hm.put(<span class="string">&quot;ccc&quot;</span>,<span class="number">333</span>);</span><br><span class="line">hm.put(<span class="string">&quot;ddd&quot;</span>,<span class="number">444</span>); hm.put(<span class="string">&quot;eee&quot;</span>,<span class="number">555</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加元素的时候至少考虑三种情况： // 2.1数组位置为null //</span></span><br><span class="line"><span class="number">2.2</span>数组位置不为<span class="literal">null</span>，键不重复，挂在下面形成链表或者红黑树 <span class="comment">//</span></span><br><span class="line"><span class="number">2.3</span>数组位置不为<span class="literal">null</span>，键重复，元素覆盖</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加方法,当调用添加方法的时候才会创建table数组 // 参数1：键 参数2：值</span></span><br><span class="line">返回值，被覆盖元素的值，没有覆盖返回<span class="literal">null</span> <span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key,V value)</span>&#123; <span class="comment">//</span></span><br><span class="line">第一个字段是将key传过去计算键的hash值 <span class="comment">//</span></span><br><span class="line">第四个参数，表示当前的参数是否保留，相同值时覆盖数据，就是这个参数决定 <span class="keyword">return</span></span><br><span class="line">putVal(hash(key),key,value,<span class="literal">false</span>,<span class="literal">true</span>); &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//利用键计算出对应的哈希值，再把哈希值进行一些额外的处理</span></span><br><span class="line"><span class="comment">//简单理解：返回值就是返回键的哈希值 static final int hash(Object key)&#123; int h;</span></span><br><span class="line"><span class="keyword">return</span>(key==<span class="literal">null</span>)?<span class="number">0</span>:(h=key.hashCode())^(h&gt;&gt;&gt;<span class="number">16</span>); &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// put方法调用putVal方法 // 参数1：键的hash值 参数2：键 参数3：值</span></span><br><span class="line">参数<span class="number">4</span>：如果键重复了，是否保留 <span class="comment">// ture：旧元素的值保留，不覆盖	//</span></span><br><span class="line"><span class="literal">false</span>：旧元素的值不会保留，覆盖 <span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash,K key,V</span></span><br><span class="line"><span class="params">value,<span class="type">boolean</span> onlyIfAbsent, <span class="type">boolean</span> evict)</span>&#123;</span><br><span class="line"><span class="comment">//定义一个局部变量，用来记录哈希表中数组的地址值。 //</span></span><br><span class="line">方法运行在栈中，数组存放在堆中，需要反复从栈到堆中寻找使用 <span class="comment">// 效率不高 Node&lt;K,</span></span><br><span class="line">V&gt;[]tab; <span class="comment">//临时的第三方变量，用来记录键值对对象的地址值 Node&lt;K, V&gt; p;</span></span><br><span class="line"><span class="comment">//表示当前数组的长度 int n; //表示索引 int i; //</span></span><br><span class="line">把hash表中数组的地址值，赋值给局部变量tab tab=table</span><br><span class="line"><span class="title function_">if</span><span class="params">(tab==<span class="literal">null</span>||(n=tab.length)</span>==<span class="number">0</span>) <span class="comment">// resize在底层做的事情</span></span><br><span class="line"><span class="comment">//1.如果当前是第一次添加数据，底层会创建一个默认长度为16，加载因子为0.75的数组</span></span><br><span class="line"><span class="comment">//2.如果不是第一次添加数据，会看数组中的元素是否达到了扩容的条件</span></span><br><span class="line"><span class="comment">//如果没有达到扩容条件，底层不会做任何操作</span></span><br><span class="line"><span class="comment">//如果达到了扩容条件，底层会把数组扩容为原先的两倍，并把数据全部转移到新的哈希表中</span></span><br><span class="line">tab=resize(); <span class="comment">//表示把当前数组的长度赋值给n n=tab.length;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 拿着数组的长度跟键的哈希值进行与运算，计算出当前键值对对象，在数组中应该存入的位置</span></span><br><span class="line">        i=(n-<span class="number">1</span>)&amp;hash;</span><br><span class="line">        <span class="comment">// 获取数组中对应的键值对对象的地址值</span></span><br><span class="line">        p=tab[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 数组位置的地址值为null，走if中的代码</span></span><br><span class="line">        <span class="keyword">if</span>(p == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 将哈希值、键、值、null传递给一个名为newNode的方法</span></span><br><span class="line">            <span class="comment">// newNode方法底层会创建一个键值对对象，然后放入数组中</span></span><br><span class="line">            tab[i]=newNode(hash,key,value,<span class="literal">null</span>);</span><br><span class="line">        <span class="comment">// 不为空，走else</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            Node&lt;K, V&gt; e;K k;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 等号左边：数组中，键值对的hash值(键值对的哈希值是根据键算的)</span></span><br><span class="line">            <span class="comment">// 等号右边：当前要添加键值对的哈希值</span></span><br><span class="line">            <span class="comment">// 如果键不一样，会返回false</span></span><br><span class="line">            <span class="comment">// 如果键一样，返回true</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> p.hash==hash;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果哈希值不一样，键肯定不一样，走下边的判断</span></span><br><span class="line">            <span class="keyword">if</span>( b1 &amp;&amp;((k=p.key)==key||(key!=<span class="literal">null</span>&amp;&amp;key.equals(k))))&#123;</span><br><span class="line">                e=p;</span><br><span class="line">                <span class="comment">// 判断p是不是树的节点</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(p <span class="keyword">instanceof</span> TreeNode)&#123;</span><br><span class="line">                <span class="comment">// 如果从数组中获取出的键值对是树的节点会添加到红黑树中</span></span><br><span class="line">                e=((TreeNode&lt;K, V&gt;)p).putTreeVal(<span class="built_in">this</span>,tab,hash,key,value);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">// 如果不是树节点就当做链表结点,添加到链表当中</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> binCount=<span class="number">0</span>;<span class="comment">/*判断条件为true*/</span>;++binCount)&#123;</span><br><span class="line">                    <span class="comment">// 获取数组中的结点的下一个结点,赋值给e</span></span><br><span class="line">                    <span class="comment">// 判断下一个结点是否为null</span></span><br><span class="line">                    <span class="keyword">if</span>((e=p.next)==<span class="literal">null</span>)&#123;</span><br><span class="line">                        <span class="comment">// 如果为null就会创建一个新的结点,来挂哈希值相同,但是键不同的键值对对象</span></span><br><span class="line">                        <span class="comment">// 形成一个新的链表</span></span><br><span class="line">                        p.next=newNode(hash,key,value,<span class="literal">null</span>);</span><br><span class="line">                        <span class="comment">// 判断长度是否超过8</span></span><br><span class="line">                        <span class="keyword">if</span>(binCount&gt;=TREEIFY_THRESHOLD-<span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            <span class="comment">// 超过8 就会调用treeifyBin</span></span><br><span class="line">                            <span class="comment">// 该方法的底层还会继续判断</span></span><br><span class="line">                            <span class="comment">// 判断数组的长度是否大于等于64</span></span><br><span class="line">                            <span class="comment">// 如果同时满足这两个条件,就会将链表转为红黑树</span></span><br><span class="line">                            treeifyBin(tab,hash);</span><br><span class="line">                        <span class="comment">// 跳出循环</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 若计算出哈希值一样，还需要用equals比较内部的属性值是否相同，属性值不同，又会返回循环</span></span><br><span class="line">                    <span class="comment">// 若内部的属性值一样，break</span></span><br><span class="line">                    <span class="keyword">if</span>(e.hash==hash&amp;&amp;((k=e.key)==key||(key!=<span class="literal">null</span>&amp;&amp;key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p=e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果e为空,表示当前不覆盖任何元素</span></span><br><span class="line">            <span class="comment">// e不为空，表示当前的键是一样的，值需要进行覆盖</span></span><br><span class="line">            <span class="keyword">if</span>(e!=<span class="literal">null</span>)&#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">                V oldValue=e.value;</span><br><span class="line">                <span class="keyword">if</span>(!onlyIfAbsent||oldValue==<span class="literal">null</span>)&#123;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 等号的右边：当前要添加的值</span></span><br><span class="line">                    <span class="comment">// 等号的左边：被覆盖的值</span></span><br><span class="line">                    e.value=value;</span><br><span class="line">            &#125;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="comment">// 将被覆盖的值return</span></span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="comment">//threshold：记录的就是数组的长度 * 0.75，哈希表的扩容时机  16 * 0.75 = 12</span></span><br><span class="line">        <span class="comment">//size先++再和扩容时机(阈值)去比较 </span></span><br><span class="line">        <span class="keyword">if</span>(++size&gt;threshold)&#123;</span><br><span class="line">            resize();</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 若当前没有覆盖任何元素，返回null</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Ztw27">LinkedHashMap集合</h4>

<ul>
<li>由键决定：有序，不重复，无索引</li>
<li>底层依旧是哈希表，每个键值对又多了一个双链表的机制记录存储的顺序</li>
</ul>
<h4 id="yHAu9">TreeMap集合</h4>

<ul>
<li><strong>添加自定义对象时，必须指定排序规则</strong></li>
<li>底层是红黑树</li>
<li>由键决定特性：不重复、无索引、可排序</li>
<li>可排序：对键进行排序</li>
<li>默认按照从小到大进行排序，也可以自己规定键的排序</li>
</ul>
<p>书写两种排序规则</p>
<ul>
<li>实现comparable接口，指定比较规则</li>
<li>创建集合时传递Comparator比较器对象，指定比较规则</li>
</ul>
<p>案例需求</p>
<ul>
<li>创建一个TreeMap集合,键是学生对象(Student),值是籍贯(String),学生属性姓名和年龄按照年龄进行排序并遍历</li>
<li>要求按照学生的年龄进行排序,如果年龄相同则按照姓名进行排序</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;</span><br><span class="line">      <span class="keyword">private</span> String name;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> name;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.name = name;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> age;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.age = age;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                  <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                  <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                  <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Student o)</span> &#123;</span><br><span class="line">          <span class="comment">//按照年龄进行排序</span></span><br><span class="line">          <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> o.getAge() - <span class="built_in">this</span>.getAge();</span><br><span class="line">          <span class="comment">//次要条件，按照姓名排序。</span></span><br><span class="line">          <span class="comment">//此处的compareTo是String包重写的方法，按照字母的ASCII码顺序，从小到大</span></span><br><span class="line">          result = result == <span class="number">0</span> ? o.getName().compareTo(<span class="built_in">this</span>.getName()) : result;</span><br><span class="line">          <span class="keyword">return</span> result;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        	<span class="comment">// 创建TreeMap集合对象</span></span><br><span class="line">          TreeMap&lt;Student,String&gt; tm = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">  		<span class="comment">// 创建学生对象</span></span><br><span class="line">          <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaohei&quot;</span>,<span class="number">23</span>);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;dapang&quot;</span>,<span class="number">22</span>);</span><br><span class="line">          <span class="type">Student</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;xiaomei&quot;</span>,<span class="number">22</span>);</span><br><span class="line">        </span><br><span class="line">  		<span class="comment">// 将学生对象添加到TreeMap集合中</span></span><br><span class="line">          tm.put(s1,<span class="string">&quot;江苏&quot;</span>);</span><br><span class="line">          tm.put(s2,<span class="string">&quot;北京&quot;</span>);</span><br><span class="line">          tm.put(s3,<span class="string">&quot;天津&quot;</span>);</span><br><span class="line">        </span><br><span class="line">  		<span class="comment">// 遍历TreeMap集合,打印每个学生的信息</span></span><br><span class="line">          tm.forEach(</span><br><span class="line">                  (Student key, String value)-&gt;&#123;</span><br><span class="line">                      System.out.println(key + <span class="string">&quot;---&quot;</span> + value);</span><br><span class="line">                  &#125;</span><br><span class="line">          );</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718451632183-17e48207-4c49-45ce-914a-01c21384e83e.png" alt="创建集合对象时，传递Comparator比较器对象"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMapDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;abcdbcdbbcdaacbfgfgdfggjuhiulghvbsdawfcggjjloioplpihjgbncvcvbbaxaaefdbacbd&quot;</span>;</span><br><span class="line">        TreeMap&lt;Character, Integer&gt; tm = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line"><span class="comment">//            判断集合集合中是否有这个字符</span></span><br><span class="line">            <span class="keyword">if</span> (tm.containsKey(c))&#123;</span><br><span class="line"><span class="comment">//                有的话就计数，更新</span></span><br><span class="line">                <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> tm.get(c);</span><br><span class="line">                count++;</span><br><span class="line">                tm.put(c,count);</span><br><span class="line"></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//                没有就添加进去</span></span><br><span class="line">                tm.put(c,<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        遍历集合，拼接</span></span><br><span class="line">        tm.forEach((key,value)-&gt; System.out.print(key+<span class="string">&quot;(&quot;</span>+value+<span class="string">&quot;)&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718452637565-d0313931-a5b1-495d-85e6-83e3dac5ff7c.png" alt="StringBuilder拼接字符串"></p>
<h5 id="hUsFc">TreeMap底层源码</h5>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">RED</span>   <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">BLACK</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Node in the Tree.  Doubles as a means to pass key-value pairs back to</span></span><br><span class="line"><span class="comment">     * user (see Map.Entry).</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Entry</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line">        K key;</span><br><span class="line">        V value;</span><br><span class="line">        Entry&lt;K,V&gt; left;</span><br><span class="line">        Entry&lt;K,V&gt; right;</span><br><span class="line">        Entry&lt;K,V&gt; parent;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">color</span> <span class="operator">=</span> BLACK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三个需要知道的成员变量 // 比较规则 private final Comparator&lt;? super K&gt;</span></span><br><span class="line">comparator;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根节点 </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The number of entries in the tree</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 集合的长度、红黑表中节点的个数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空参构造 // 默认传值，没有比较器对象 public TreeMap() &#123; comparator = null;</span></span><br><span class="line">&#125; <span class="comment">// 带参构造 // 传递比较器对象 public TreeMap(Comparator&lt;? super K&gt;</span></span><br><span class="line">comparator) &#123; <span class="built_in">this</span>.comparator = comparator; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">参数一：键 参数二：值 参数三：当键重复的时候，是否需要覆盖值 <span class="literal">true</span>：覆盖 <span class="literal">false</span>：不覆盖</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> V <span class="title function_">put</span><span class="params">(K key, V value, <span class="type">boolean</span> replaceOld)</span> &#123;</span><br><span class="line">    	<span class="comment">//获取根节点的地址值，赋值给局部变量t</span></span><br><span class="line">        Entry&lt;K,V&gt; t = root;</span><br><span class="line">    	<span class="comment">//判断根节点是否为null</span></span><br><span class="line">    	<span class="comment">//如果为null，表示当前是第一次添加，会把当前要添加的元素，当做根节点</span></span><br><span class="line">    	<span class="comment">//如果不为null，表示当前不是第一次添加，跳过这个判断继续执行下面的代码</span></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">    		<span class="comment">//方法的底层，会创建一个Entry对象，把他当做根节点</span></span><br><span class="line">            addEntryToEmptyMap(key, value);</span><br><span class="line">    		<span class="comment">//表示此时没有覆盖任何的元素</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    	<span class="comment">//表示两个元素的键比较之后的结果</span></span><br><span class="line">        <span class="type">int</span> cmp;</span><br><span class="line">    	<span class="comment">//表示当前要添加节点的父节点</span></span><br><span class="line">        Entry&lt;K,V&gt; parent;</span><br><span class="line">    	</span><br><span class="line">    	<span class="comment">//表示当前的比较规则</span></span><br><span class="line">    	<span class="comment">//如果我们是采取默认的自然排序，那么此时comparator记录的是null，cpr记录的也是null</span></span><br><span class="line">    	<span class="comment">//如果我们是采取比较去排序方式，那么此时comparator记录的是就是比较器</span></span><br><span class="line">        Comparator&lt;? <span class="built_in">super</span> K&gt; cpr = comparator;</span><br><span class="line">    	<span class="comment">//表示判断当前是否有比较器对象</span></span><br><span class="line">    	<span class="comment">//如果传递了比较器对象，就执行if里面的代码，此时以比较器的规则为准</span></span><br><span class="line">    	<span class="comment">//如果没有传递比较器对象，就执行else里面的代码，此时以自然排序的规则为准</span></span><br><span class="line">        <span class="keyword">if</span> (cpr != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                parent = t;</span><br><span class="line">                cmp = cpr.compare(key, t.key);</span><br><span class="line">                <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                    t = t.left;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                    t = t.right;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> t.value;</span><br><span class="line">                    <span class="keyword">if</span> (replaceOld || oldValue == <span class="literal">null</span>) &#123;</span><br><span class="line">                        t.value = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> oldValue;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    		<span class="comment">//把键进行强转，强转成Comparable类型的</span></span><br><span class="line">    		<span class="comment">//要求：键必须要实现Comparable接口，如果没有实现这个接口</span></span><br><span class="line">    		<span class="comment">//此时在强转的时候，就会报错。</span></span><br><span class="line">            Comparable&lt;? <span class="built_in">super</span> K&gt; k = (Comparable&lt;? <span class="built_in">super</span> K&gt;) key;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">    			<span class="comment">//把根节点当做当前节点的父节点</span></span><br><span class="line">                parent = t;</span><br><span class="line">    			<span class="comment">//调用compareTo方法，比较根节点和当前要添加节点的大小关系</span></span><br><span class="line">                cmp = k.compareTo(t.key);</span><br><span class="line">    			</span><br><span class="line">                <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">    				<span class="comment">//如果比较的结果为负数</span></span><br><span class="line">    				<span class="comment">//那么继续到根节点的左边去找</span></span><br><span class="line">                    t = t.left;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">    				<span class="comment">//如果比较的结果为正数</span></span><br><span class="line">    				<span class="comment">//那么继续到根节点的右边去找</span></span><br><span class="line">                    t = t.right;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">    				<span class="comment">//如果比较的结果为0，会覆盖</span></span><br><span class="line">                    <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> t.value;</span><br><span class="line">                    <span class="keyword">if</span> (replaceOld || oldValue == <span class="literal">null</span>) &#123;</span><br><span class="line">                        t.value = value;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> oldValue;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 判断要添加的根节点是否为空，不为空就继续找地方添加</span></span><br><span class="line">                <span class="comment">// 为空就找到了地方，进行添加节点</span></span><br><span class="line">            &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    	<span class="comment">//就会把当前节点按照指定的规则进行添加</span></span><br><span class="line">        addEntry(key, value, parent, cmp &lt; <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;	</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addEntry</span><span class="params">(K key, V value, Entry&lt;K, V&gt; parent, <span class="type">boolean</span> addToLeft)</span> &#123;</span><br><span class="line">        Entry&lt;K,V&gt; e = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(key, value, parent);</span><br><span class="line">        <span class="keyword">if</span> (addToLeft)</span><br><span class="line">            parent.left = e;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            parent.right = e;</span><br><span class="line">    	<span class="comment">//添加完毕之后，需要按照红黑树的规则进行调整</span></span><br><span class="line">        fixAfterInsertion(e);</span><br><span class="line">        size++;</span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fixAfterInsertion</span><span class="params">(Entry&lt;K,V&gt; x)</span> &#123;</span><br><span class="line">    	<span class="comment">//因为红黑树的节点默认就是红色的</span></span><br><span class="line">        x.color = RED;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">//按照红黑规则进行调整</span></span><br><span class="line">    	</span><br><span class="line">    	<span class="comment">//parentOf:获取x的父节点</span></span><br><span class="line">    	<span class="comment">//parentOf(parentOf(x)):获取x的爷爷节点</span></span><br><span class="line">    	<span class="comment">//leftOf:获取左子节点</span></span><br><span class="line">        <span class="keyword">while</span> (x != <span class="literal">null</span> &amp;&amp; x != root &amp;&amp; x.parent.color == RED) &#123;</span><br><span class="line">    		</span><br><span class="line">    		</span><br><span class="line">    		<span class="comment">//判断当前节点的父节点是爷爷节点的左子节点还是右子节点</span></span><br><span class="line">    		<span class="comment">//目的：为了获取当前节点的叔叔节点</span></span><br><span class="line">            <span class="keyword">if</span> (parentOf(x) == leftOf(parentOf(parentOf(x)))) &#123;</span><br><span class="line">    			<span class="comment">//表示当前节点的父节点是爷爷节点的左子节点</span></span><br><span class="line">    			<span class="comment">//那么下面就可以用rightOf获取到当前节点的叔叔节点</span></span><br><span class="line">                Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));</span><br><span class="line">                <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">    				<span class="comment">//叔叔节点为红色的处理方案</span></span><br><span class="line">    				</span><br><span class="line">    				<span class="comment">//把父节点设置为黑色</span></span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">    				<span class="comment">//把叔叔节点设置为黑色</span></span><br><span class="line">                    setColor(y, BLACK);</span><br><span class="line">    				<span class="comment">//把爷爷节点设置为红色</span></span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">    				</span><br><span class="line">    				<span class="comment">//把爷爷节点设置为当前节点</span></span><br><span class="line">                    x = parentOf(parentOf(x));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    				</span><br><span class="line">    				<span class="comment">//叔叔节点为黑色的处理方案</span></span><br><span class="line">    				</span><br><span class="line">    				</span><br><span class="line">    				<span class="comment">//表示判断当前节点是否为父节点的右子节点</span></span><br><span class="line">                    <span class="keyword">if</span> (x == rightOf(parentOf(x))) &#123;</span><br><span class="line">    					</span><br><span class="line">    					<span class="comment">//表示当前节点是父节点的右子节点</span></span><br><span class="line">                        x = parentOf(x);</span><br><span class="line">    					<span class="comment">//左旋</span></span><br><span class="line">                        rotateLeft(x);</span><br><span class="line">                    &#125;</span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                    rotateRight(parentOf(parentOf(x)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    			<span class="comment">//表示当前节点的父节点是爷爷节点的右子节点</span></span><br><span class="line">    			<span class="comment">//那么下面就可以用leftOf获取到当前节点的叔叔节点</span></span><br><span class="line">                Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));</span><br><span class="line">                <span class="keyword">if</span> (colorOf(y) == RED) &#123;</span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">                    setColor(y, BLACK);</span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                    x = parentOf(parentOf(x));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (x == leftOf(parentOf(x))) &#123;</span><br><span class="line">                        x = parentOf(x);</span><br><span class="line">                        rotateRight(x);</span><br><span class="line">                    &#125;</span><br><span class="line">                    setColor(parentOf(x), BLACK);</span><br><span class="line">                    setColor(parentOf(parentOf(x)), RED);</span><br><span class="line">                    rotateLeft(parentOf(parentOf(x)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    	</span><br><span class="line">    	<span class="comment">//把根节点设置为黑色</span></span><br><span class="line">        root.color = BLACK;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>课堂思考问题： <span class="number">6.</span>1TreeMap添加元素的时候，键是否需要重写hashCode和equals方法？</span><br><span class="line">此时是不需要重写的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>2HashMap是哈希表结构的，JDK8开始由数组，链表，红黑树组成的。</span><br><span class="line">既然有红黑树，HashMap的键是否需要实现Compareable接口或者传递比较器对象呢？</span><br><span class="line">不需要的。 因为在HashMap的底层，默认是利用哈希值的大小关系来创建红黑树的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>3TreeMap和HashMap谁的效率更高？</span><br><span class="line">如果是最坏情况，添加了<span class="number">8</span>个元素，这<span class="number">8</span>个元素形成了链表，此时TreeMap的效率要更高</span><br><span class="line">但是这种情况出现的几率非常的少。 一般而言，还是HashMap的效率要更高。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.4</span>你觉得在Map集合中，java会提供一个如果键重复了，不会覆盖的put方法呢？</span><br><span class="line">此时putIfAbsent本身不重要。 传递一个思想：</span><br><span class="line">代码中的逻辑都有两面性，如果我们只知道了其中的A面，而且代码中还发现了有变量可以控制两面性的发生。</span><br><span class="line">那么该逻辑一定会有B面。</span><br><span class="line"></span><br><span class="line">    习惯：</span><br><span class="line">    	<span class="type">boolean</span>类型的变量控制，一般只有AB两面，因为<span class="type">boolean</span>只有两个值</span><br><span class="line">    	<span class="type">int</span>类型的变量控制，一般至少有三面，因为<span class="type">int</span>可以取多个值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">6.5</span>三种双列集合，以后如何选择？ HashMap LinkedHashMap TreeMap</span><br><span class="line"></span><br><span class="line">    默认：HashMap（效率最高）</span><br><span class="line">    如果要保证存取有序：LinkedHashMap</span><br><span class="line">    如果要进行排序：TreeMap</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="PYWp8">可变参数</h2>
方法形参的个数是可以发生变化的

<p>格式:属性类型…名字</p>
<p>int…args</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718529600690-6ba30f5e-961f-4646-ab54-bcee72787c42.png" alt="可变参数"><br>可变参数的细节：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718529773681-a6f84847-5d31-4720-b754-b19723525b8b.png"></p>
<h2 id="GCtJu">Collections</h2>

<ul>
<li><strong>java.util.Collections：是集合工具类</strong></li>
<li><strong>作用：Collections不是集合，而是集合的工具类</strong></li>
</ul>
<h3 id="XZvi5">常用API</h3>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718529961562-1be60e48-b304-4def-a740-8509f547553c.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718530110848-3a709f2b-a4cd-4a9a-8eb7-a81fbb4f9e1b.png" alt="前两个方法的示例"></p>
<h2 id="b41HA">不变集合</h2>
<h3 id="tScYP">创建不可变的集合</h3>
不能修改的集合：长度不能修改、内容不能修改

<ul>
<li>如果某个数据不能被修改，把它防御性拷贝到不可变集合中是很好的实践</li>
<li>当集合对象被不可信的库调用时，不可变形式是安全的</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/Collection/1718536559952-a080912a-fdde-4b88-920e-e02577cff683.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            创建不可变的List集合</span></span><br><span class="line"><span class="comment">            &quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;, &quot;赵六&quot;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//一旦创建完毕之后，是无法进行修改的，在下面的代码中，只能进行查询操作</span></span><br><span class="line">        List&lt;String&gt; list = List.of(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;王五&quot;</span>, <span class="string">&quot;赵六&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line">        System.out.println(list.get(<span class="number">1</span>));</span><br><span class="line">        System.out.println(list.get(<span class="number">2</span>));</span><br><span class="line">        System.out.println(list.get(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> list.get(i);</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;---------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//list.remove(&quot;李四&quot;);</span></span><br><span class="line">        <span class="comment">//list.add(&quot;aaa&quot;);</span></span><br><span class="line">        list.set(<span class="number">0</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           创建不可变的Set集合</span></span><br><span class="line"><span class="comment">           &quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;, &quot;赵六&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">           细节：</span></span><br><span class="line"><span class="comment">                当我们要获取一个不可变的Set集合时，里面的参数一定要保证唯一性</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//一旦创建完毕之后，是无法进行修改的，在下面的代码中，只能进行查询操作</span></span><br><span class="line">        Set&lt;String&gt; set = Set.of(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;张三&quot;</span>, <span class="string">&quot;李四&quot;</span>, <span class="string">&quot;王五&quot;</span>, <span class="string">&quot;赵六&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String s : set) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Iterator&lt;String&gt; it = set.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//set.remove(&quot;王五&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 键值对数&lt;=10</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">        创建Map的不可变集合</span></span><br><span class="line"><span class="comment">            细节1：</span></span><br><span class="line"><span class="comment">                键是不能重复的</span></span><br><span class="line"><span class="comment">            细节2：</span></span><br><span class="line"><span class="comment">                Map里面的of方法，参数是有上限的，最多只能传递20个参数，10个键值对</span></span><br><span class="line"><span class="comment">            细节3：</span></span><br><span class="line"><span class="comment">                如果我们要传递多个键值对对象，数量大于10个，在Map接口中还有一个方法</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//一旦创建完毕之后，是无法进行修改的，在下面的代码中，只能进行查询操作</span></span><br><span class="line">        Map&lt;String, String&gt; map = Map.of(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;南京&quot;</span>, <span class="string">&quot;张三&quot;</span>, <span class="string">&quot;北京&quot;</span>, <span class="string">&quot;王五&quot;</span>, <span class="string">&quot;上海&quot;</span>,</span><br><span class="line">                <span class="string">&quot;赵六&quot;</span>, <span class="string">&quot;广州&quot;</span>, <span class="string">&quot;孙七&quot;</span>, <span class="string">&quot;深圳&quot;</span>, <span class="string">&quot;周八&quot;</span>, <span class="string">&quot;杭州&quot;</span>,</span><br><span class="line">                <span class="string">&quot;吴九&quot;</span>, <span class="string">&quot;宁波&quot;</span>, <span class="string">&quot;郑十&quot;</span>, <span class="string">&quot;苏州&quot;</span>, <span class="string">&quot;刘一&quot;</span>, <span class="string">&quot;无锡&quot;</span>,</span><br><span class="line">                <span class="string">&quot;陈二&quot;</span>, <span class="string">&quot;嘉兴&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;String&gt; keys = map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (String key : keys) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">            System.out.println(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; entry : entries) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(key + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 键值对数大于10</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImmutableDemo4</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            创建Map的不可变集合,键值对的数量超过10个</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.创建一个普通的Map集合</span></span><br><span class="line">        HashMap&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hm.put(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;南京&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;李四&quot;</span>, <span class="string">&quot;北京&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;王五&quot;</span>, <span class="string">&quot;上海&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;赵六&quot;</span>, <span class="string">&quot;北京&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;孙七&quot;</span>, <span class="string">&quot;深圳&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;周八&quot;</span>, <span class="string">&quot;杭州&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;吴九&quot;</span>, <span class="string">&quot;宁波&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;郑十&quot;</span>, <span class="string">&quot;苏州&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;刘一&quot;</span>, <span class="string">&quot;无锡&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;陈二&quot;</span>, <span class="string">&quot;嘉兴&quot;</span>);</span><br><span class="line">        hm.put(<span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;111&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.利用上面的数据来获取一个不可变的集合</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        //获取到所有的键值对对象（Entry对象）</span></span><br><span class="line"><span class="comment">        Set&lt;Map.Entry&lt;String, String&gt;&gt; entries = hm.entrySet();</span></span><br><span class="line"><span class="comment">        //把entries变成一个数组</span></span><br><span class="line"><span class="comment">        Map.Entry[] arr1 = new Map.Entry[0];</span></span><br><span class="line"><span class="comment">        //toArray方法在底层会比较集合的长度跟数组的长度两者的大小</span></span><br><span class="line"><span class="comment">        //如果集合的长度 &gt; 数组的长度 ：数据在数组中放不下，此时会根据实际数据的个数，重新创建数组</span></span><br><span class="line"><span class="comment">        //如果集合的长度 &lt;= 数组的长度：数据在数组中放的下，此时不会创建新的数组，而是直接用</span></span><br><span class="line"><span class="comment">        Map.Entry[] arr2 = entries.toArray(arr1);</span></span><br><span class="line"><span class="comment">        //不可变的map集合</span></span><br><span class="line"><span class="comment">        Map map = Map.ofEntries(arr2);</span></span><br><span class="line"><span class="comment">        map.put(&quot;bbb&quot;,&quot;222&quot;);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Map&lt;Object, Object&gt; map = Map.ofEntries(hm.entrySet().toArray(new Map.Entry[0]));</span></span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map = Map.copyOf(hm);</span><br><span class="line">        map.put(<span class="string">&quot;bbb&quot;</span>,<span class="string">&quot;222&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/avatar.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/avatar.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Arjen</div><div class="post-copyright__author_desc">Blog</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/09/16/Java-Collection/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/09/16/Java-Collection/')">Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/09/16/Java-Collection/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Java-Collection,集合框架的数据结构,原理,使用,呕心沥血之作&amp;url=http://example.com/2025/09/16/Java-Collection/&amp;pic=https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Arjen</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/JAVA/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>JAVA<span class="tagsPageCount">13</span></a><a class="post-meta__box__tags" href="/tags/Collection/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Collection<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/09/16/Java-Lambda/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java-Lambda,高效但会牺牲阅读性</div></div></a></div><div class="next-post pull-right"><a href="/2025/09/17/Java-Stream/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java-Stream,链式编程,高效简洁</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/09/17/Java-Exceptoin/" title="Java-Exceptoin,异常处理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-17</div><div class="title">Java-Exceptoin,异常处理</div></div></a></div><div><a href="/2025/09/17/Java-File/" title="Java-File"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-17</div><div class="title">Java-File</div></div></a></div><div><a href="/2025/09/15/Java-API/" title="Java-API,常用的API,涉及部分底层原理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-15</div><div class="title">Java-API,常用的API,涉及部分底层原理</div></div></a></div><div><a href="/2025/10/29/Java-Proxy/" title="Java-动态代理,非侵入式编程的核心技术"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-10-29</div><div class="title">Java-动态代理,非侵入式编程的核心技术</div></div></a></div><div><a href="/2025/09/17/Java-MethodRef/" title="Java-方法引用,lambda表达式的另一种写法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-17</div><div class="title">Java-方法引用,lambda表达式的另一种写法</div></div></a></div><div><a href="/2025/09/16/Java-Lambda/" title="Java-Lambda,高效但会牺牲阅读性"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-16</div><div class="title">Java-Lambda,高效但会牺牲阅读性</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2021/06/20/c0f1977daac9a.png" alt="status"/></div></div><div class="author-info__description">我不再将这个世界与我所期待,塑造的圆满世界比照,而是接受这个世界,爱它,属于它</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Arjen</h1><div class="author-info__desc">Blog</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/Arjen-Ajie" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/371519548" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">在茫茫人海中,你找到了我~ Welcome,This is my world!</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/tianjiaweixin.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/personal/erweima.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#fA7Pj"><span class="toc-text">志之难也，不在胜人，在自胜也</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#slUJQ"><span class="toc-text">集合与数组的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#X1ejl"><span class="toc-text">集合体系结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kBYtk"><span class="toc-text">基本数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mPhmm"><span class="toc-text">栈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HLsrr"><span class="toc-text">队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iWpGr"><span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMewd"><span class="toc-text">链表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TpjxU"><span class="toc-text">树</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#uGMcn"><span class="toc-text">二叉树的遍历方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yFhBo"><span class="toc-text">二叉查找树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ceW7t"><span class="toc-text">平衡二叉树</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rRsPJ"><span class="toc-text">平衡二叉树保持平衡机制(旋转)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#UfjPC"><span class="toc-text">左旋</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#nofkY"><span class="toc-text">

自定义链式左旋：左旋后的节点即将作为根节点且不全有左右字数
</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#txvAK"><span class="toc-text">

自定义叉式左旋：左旋后即将作为根节点且已经有了两个左右子节点
</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#aah7T"><span class="toc-text">右旋</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DAbnj"><span class="toc-text">需要旋转的情况</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#zhDl4"><span class="toc-text">左左——整体右旋</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#JffsH"><span class="toc-text">左右——局部左旋整体右旋</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ieusO"><span class="toc-text">右右——整体左旋</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#t5jtf"><span class="toc-text">右左——局部右旋整体左旋</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#C2hKt"><span class="toc-text">红黑树</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SaAT5"><span class="toc-text">红黑规则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#xxh4D"><span class="toc-text">添加节点的规则</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JWuJS"><span class="toc-text">单列集合：一次添加一个数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mliDj"><span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Zuk8H"><span class="toc-text">Collection集合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#bDW3E"><span class="toc-text">概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LkmdM"><span class="toc-text">创建Collection集合的对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#vRTAa"><span class="toc-text">Collection集合常用方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XmYYS"><span class="toc-text">Collection集合的遍历方式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#aHe2x"><span class="toc-text">迭代器遍历：不依赖索引、创建指针、移动指针获取元素</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#lbsR0"><span class="toc-text">增强for遍历</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#GWLPV"><span class="toc-text">forEach遍历方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uGMsT"><span class="toc-text">List集合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#FebVA"><span class="toc-text">List集合特有的方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#x3iKS"><span class="toc-text">List集合的遍历方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ZrQgW"><span class="toc-text">ArrayList集合</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#tLaAP"><span class="toc-text">底层原理</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MDXFO"><span class="toc-text">LinkedList集合</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#psSGj"><span class="toc-text">底层原理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#rI7Mq"><span class="toc-text">LinkedList第一次添加元素</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#vOKEU"><span class="toc-text">LinkedList第n次添加元素(n&gt;&#x3D;2)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NJtyf"><span class="toc-text">迭代器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jkAVc"><span class="toc-text">泛型深入</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#bt2Yu"><span class="toc-text">泛型定义的范围</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Etr2j"><span class="toc-text">泛型类</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#wrhOx"><span class="toc-text">泛型方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#iXbfL"><span class="toc-text">泛型接口</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XXvJh"><span class="toc-text">泛型的继承和通配符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cmshv"><span class="toc-text">Set集合 </span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XxW4t"><span class="toc-text"></span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#wT1b6"><span class="toc-text">HashSet集合</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#dC8DN"><span class="toc-text">哈希表</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#mvin3"><span class="toc-text">哈希值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Wsc9G"><span class="toc-text">HashSet JDK8以前的底层原理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Ok2w8"><span class="toc-text">HashSet的三个问题</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SC8it"><span class="toc-text">LinkedHashSet集合</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ifflp"><span class="toc-text">底层原理</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#q7EQl"><span class="toc-text">TreeSet集合</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#rGWHp"><span class="toc-text">  TreeSet集合默认的规则</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#TgdIy"><span class="toc-text">TreeSet比较规则</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NcOBo"><span class="toc-text">双列集合：一次添加一对数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#F64CQ"><span class="toc-text">Map集合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#bgENB"><span class="toc-text">Map常见的API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SOWNP"><span class="toc-text">Map集合获取值的方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pTq38"><span class="toc-text">Map集合遍历方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#r1ypu"><span class="toc-text">HashMap集合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#BWVtX"><span class="toc-text">HashMap底层源码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Ztw27"><span class="toc-text">LinkedHashMap集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yHAu9"><span class="toc-text">TreeMap集合</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#hUsFc"><span class="toc-text">TreeMap底层源码</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PYWp8"><span class="toc-text">可变参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GCtJu"><span class="toc-text">Collections</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XZvi5"><span class="toc-text">常用API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#b41HA"><span class="toc-text">不变集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tScYP"><span class="toc-text">创建不可变的集合</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/29/Java-Proxy/" title="Java-动态代理,非侵入式编程的核心技术"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-动态代理,非侵入式编程的核心技术"/></a><div class="content"><a class="title" href="/2025/10/29/Java-Proxy/" title="Java-动态代理,非侵入式编程的核心技术">Java-动态代理,非侵入式编程的核心技术</a><time datetime="2025-10-29T07:46:11.000Z" title="发表于 2025-10-29 15:46:11">2025-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/29/Java-Reflection/" title="Java-反射"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-反射"/></a><div class="content"><a class="title" href="/2025/10/29/Java-Reflection/" title="Java-反射">Java-反射</a><time datetime="2025-10-29T07:45:13.000Z" title="发表于 2025-10-29 15:45:13">2025-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/16/Java-webSocket/" title="Java-WebSocket"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-WebSocket"/></a><div class="content"><a class="title" href="/2025/10/16/Java-webSocket/" title="Java-WebSocket">Java-WebSocket</a><time datetime="2025-10-16T01:33:54.000Z" title="发表于 2025-10-16 09:33:54">2025-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/16/Java-Thread2/" title="Java-Thread扩展"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/JAVA/java.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java-Thread扩展"/></a><div class="content"><a class="title" href="/2025/10/16/Java-Thread2/" title="Java-Thread扩展">Java-Thread扩展</a><time datetime="2025-10-16T01:08:03.000Z" title="发表于 2025-10-16 09:08:03">2025-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/30/sz-bxsb/" title="书摘-病隙碎笔"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://arjenblog-1339556015.cos.ap-beijing.myqcloud.com/docu/zl/bxsb/a1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="书摘-病隙碎笔"/></a><div class="content"><a class="title" href="/2025/09/30/sz-bxsb/" title="书摘-病隙碎笔">书摘-病隙碎笔</a><time datetime="2025-09-30T06:38:09.000Z" title="发表于 2025-09-30 14:38:09">2025-09-30</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/staticPic/shangban.png" alt="距离百万富翁也就还差中彩票啦~" title="距离百万富翁也就还差中彩票啦~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="Arjen" target="_blank">Arjen</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">16</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://earth.nullschool.net/zh-cn" title="earth"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="earth"/><span class="back-menu-item-text">earth</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://bongo.cat/" title="敲鼓喵"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="敲鼓喵"/><span class="back-menu-item-text">敲鼓喵</span></a><a class="back-menu-item" href="/" title="陆续添加中..."><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="陆续添加中..."/><span class="back-menu-item-text">陆续添加中...</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 全部</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=9586170740&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/API/" style="font-size: 0.88rem;">API<sup>1</sup></a><a href="/tags/Collection/" style="font-size: 0.88rem;">Collection<sup>1</sup></a><a href="/tags/Exception/" style="font-size: 0.88rem;">Exception<sup>1</sup></a><a href="/tags/File/" style="font-size: 0.88rem;">File<sup>1</sup></a><a href="/tags/IO/" style="font-size: 0.88rem;">IO<sup>1</sup></a><a href="/tags/JAVA/" style="font-size: 0.88rem; font-weight: 500; color: var(--anzhiyu-lighttext)">JAVA<sup>13</sup></a><a href="/tags/Lambda/" style="font-size: 0.88rem;">Lambda<sup>1</sup></a><a href="/tags/Stream/" style="font-size: 0.88rem;">Stream<sup>1</sup></a><a href="/tags/Thread/" style="font-size: 0.88rem;">Thread<sup>1</sup></a><a href="/tags/Thread%E6%89%A9%E5%B1%95/" style="font-size: 0.88rem;">Thread扩展<sup>1</sup></a><a href="/tags/%E4%B9%A6%E6%91%98/" style="font-size: 0.88rem;">书摘<sup>1</sup></a><a href="/tags/%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" style="font-size: 0.88rem;">动态代理<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 0.88rem;">反射<sup>1</sup></a><a href="/tags/%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8/" style="font-size: 0.88rem;">方法引用<sup>1</sup></a><a href="/tags/%E7%97%85%E9%9A%99%E7%A2%8E%E7%AC%94/" style="font-size: 0.88rem;">病隙碎笔<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 0.88rem;">网络编程<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="9586170740" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/5934815007&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("09/10/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Arjen 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("09/10/2025 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "/staticPic/xiaban.png";
        img.title = "下班了就该开开心心的玩耍~";
        img.alt = "下班了就该开开心心的玩耍~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.arjen.fun/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://s4.zstatic.net/ajax/libs/twikoo/1.6.44/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.arjen.fun/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.arjen.fun/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://s4.zstatic.net/ajax/libs/twikoo/1.6.44/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>